{"version":3,"file":"percept.js","mappings":"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","sources":["webpack://Percept/webpack/universalModuleDefinition","webpack://Percept/./src/common/constants.ts","webpack://Percept/./src/common/enums.ts","webpack://Percept/./src/common/index.ts","webpack://Percept/./src/core/canvas.ts","webpack://Percept/./src/core/color.ts","webpack://Percept/./src/core/debug.ts","webpack://Percept/./src/core/drawing.ts","webpack://Percept/./src/core/index.ts","webpack://Percept/./src/core/node.ts","webpack://Percept/./src/math/dimension.ts","webpack://Percept/./src/math/index.ts","webpack://Percept/./src/math/matrix.ts","webpack://Percept/./src/math/transform.ts","webpack://Percept/./src/math/vector.ts","webpack://Percept/./src/percept.ts","webpack://Percept/./src/view/ellipse.ts","webpack://Percept/./src/view/empty.ts","webpack://Percept/./src/view/image.ts","webpack://Percept/./src/view/index.ts","webpack://Percept/./src/view/line.ts","webpack://Percept/./src/view/linear-gradient.ts","webpack://Percept/./src/view/polygon.ts","webpack://Percept/./src/view/radial-gradient.ts","webpack://Percept/./src/view/rectangle.ts","webpack://Percept/./src/view/text.ts","webpack://Percept/webpack/bootstrap","webpack://Percept/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Percept\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Percept\"] = factory();\n\telse\n\t\troot[\"Percept\"] = factory();\n})(self, () => {\nreturn ","export enum Constant {\r\n  TAU = Math.PI / 180,\r\n}\r\n","export enum Handle {\r\n  AUTO = -1,\r\n}\r\n","export * from \"./enums\";\r\nexport * from \"./constants\";\r\n","import { Drawing } from \".\";\r\n\r\n/**\r\n * The Canvas object holds an HTMLCanvasElement reference and its 2d context\r\n */\r\nexport class Canvas {\r\n  canvasElement: HTMLCanvasElement;\r\n  context: CanvasRenderingContext2D;\r\n  offCanvasElement: OffscreenCanvas;\r\n  offContext: OffscreenCanvasRenderingContext2D;\r\n\r\n  width: number;\r\n  height: number;\r\n  private drawingHandle: number = -1;\r\n\r\n  /**\r\n   * If no parameters are passed then a new canvas element will be created and appended to `<body>`\r\n   *\r\n   * @param element Reference to an html `<canvas>` or `<div>` element, if a `<div>` element is passed, then a canvas will be created and appended\r\n   * @param width Passing a width will overwrite previously defined canvas width\r\n   * @param height Passing a height will overwrite previously defined canvas height\r\n   */\r\n  constructor(\r\n    element?: HTMLCanvasElement | HTMLDivElement,\r\n    width?: number,\r\n    height?: number\r\n  ) {\r\n    if (!element) {\r\n      this.canvasElement = document.createElement(\"canvas\");\r\n      this.canvasElement.width = document.body.clientWidth;\r\n      this.canvasElement.height = document.body.clientHeight;\r\n      document.body.appendChild(this.canvasElement);\r\n    } else {\r\n      if (element instanceof HTMLDivElement) {\r\n        this.canvasElement = document.createElement(\"canvas\");\r\n        if (width && height) {\r\n          this.canvasElement.width = width;\r\n          this.canvasElement.height = height;\r\n        } else {\r\n          this.canvasElement.width = element.clientWidth;\r\n          this.canvasElement.height = element.clientHeight;\r\n        }\r\n        element.appendChild(this.canvasElement);\r\n      } else {\r\n        this.canvasElement = element;\r\n        if (width && height) {\r\n          this.canvasElement.width = width;\r\n          this.canvasElement.height = height;\r\n        }\r\n      }\r\n    }\r\n    this.width = this.canvasElement.width;\r\n    this.height = this.canvasElement.height;\r\n    this.context = this.canvasElement.getContext(\"2d\");\r\n\r\n    this.offCanvasElement = new OffscreenCanvas(this.width, this.height);\r\n    this.offContext = this.offCanvasElement.getContext(\"2d\");\r\n  }\r\n\r\n  /**\r\n   * Calls render function of `Drawing`\r\n   *\r\n   * @param drawing A `Drawing` object, which will be rendered by this canvas\r\n   */\r\n  draw(drawing: Drawing) {\r\n    if (this.drawingHandle != -1) {\r\n      window.cancelAnimationFrame(this.drawingHandle);\r\n    }\r\n    window.requestAnimationFrame(drawing.render.bind(drawing));\r\n  }\r\n}\r\n","export class Color {\r\n  static Random(): string {\r\n    return \"#\" + Math.floor(Math.random() * 16777215).toString(16);\r\n  }\r\n\r\n  static rgbToHex(rgb: number[] | Uint8ClampedArray): string {\r\n    return (\r\n      \"#\" +\r\n      Color._componentToHex(rgb[0]) +\r\n      Color._componentToHex(rgb[1]) +\r\n      Color._componentToHex(rgb[2])\r\n    );\r\n  }\r\n\r\n  static _componentToHex(c: number) {\r\n    let hex = c.toString(16);\r\n    return hex.length == 1 ? \"0\" + hex : hex;\r\n  }\r\n}\r\n","import { Drawing, IDebugCall } from \".\";\r\nimport { Vector2 } from \"../math\";\r\n\r\n/**\r\n * Includes static methods for debugging\r\n */\r\nexport class Debug {\r\n  /**\r\n   * Will render a filled circle denoting a single point on canvas\r\n   *\r\n   * @param key A unique name for this debug\r\n   * @param drawing Drawing, on which this debug will render\r\n   * @param point The point to render\r\n   * @param props Styling properties for debug\r\n   * @param frames Specifies for how many frames this debug will persist (e.g passing 100 will allow this debug to be rendered for 100 consecutive frames without clearing it from canvas)\r\n   */\r\n  static debugPoint(\r\n    key: string,\r\n    drawing: Drawing,\r\n    point: Vector2,\r\n    props: { color: string; radius?: number },\r\n    frames?: number\r\n  ) {\r\n    Debug.limitDebugCalls(drawing, key, frames);\r\n\r\n    drawing.debugCalls[key].push({\r\n      debugFunction: Debug._debugPoint,\r\n      arguments: [drawing.canvas.context, point.clone(), props],\r\n    });\r\n  }\r\n\r\n  private static _debugPoint(\r\n    context: CanvasRenderingContext2D,\r\n    center: Vector2,\r\n    props: { color: string; radius?: number }\r\n  ) {\r\n    context.fillStyle = props.color;\r\n    context.beginPath();\r\n    context.arc(\r\n      center.x,\r\n      center.y,\r\n      props.radius ? props.radius : 2,\r\n      0,\r\n      2 * Math.PI\r\n    );\r\n    context.fill();\r\n  }\r\n\r\n  /**\r\n   * Will render a line with green and red dots on start and end co-ordinates of line\r\n   *\r\n   * @param key A unique name for this debug\r\n   * @param drawing Drawing, on which this debug will render\r\n   * @param from Start Vector for this line\r\n   * @param to End Vector point for this line\r\n   * @param props Styling properties for debug\r\n   * @param frames Specifies for how many frames this debug will persist (e.g passing 100 will allow this debug to be rendered for 100 consecutive frames without clearing it from canvas)\r\n   */\r\n  static debugLine(\r\n    key: string,\r\n    drawing: Drawing,\r\n    from: Vector2,\r\n    to: Vector2,\r\n    props: { color: string; width?: number },\r\n    frames?: number\r\n  ) {\r\n    Debug.limitDebugCalls(drawing, key, frames);\r\n\r\n    drawing.debugCalls[key].push({\r\n      debugFunction: Debug._debugLine,\r\n      arguments: [drawing.canvas.context, from.clone(), to.clone(), props],\r\n    });\r\n  }\r\n\r\n  private static _debugLine(\r\n    context: CanvasRenderingContext2D,\r\n    from: Vector2,\r\n    to: Vector2,\r\n    props: { color: string; width?: number }\r\n  ) {\r\n    context.strokeStyle = props.color;\r\n    context.lineWidth = props.width ? props.width : 1;\r\n    context.beginPath();\r\n    context.moveTo(from.x, from.y);\r\n    context.lineTo(to.x, to.y);\r\n    context.stroke();\r\n\r\n    context.fillStyle = \"green\";\r\n    context.beginPath();\r\n    context.arc(from.x, from.y, 2, 0, 2 * Math.PI);\r\n    context.fill();\r\n\r\n    context.fillStyle = \"red\";\r\n    context.beginPath();\r\n    context.arc(to.x, to.y, 2, 0, 2 * Math.PI);\r\n    context.fill();\r\n  }\r\n\r\n  /**\r\n   * @hidden\r\n   *\r\n   * Starts debug render calls stored in debugCalls\r\n   */\r\n  static show(debugCalls: IDebugCall, context: CanvasRenderingContext2D) {\r\n    for (let debug in debugCalls) {\r\n      for (let call of debugCalls[debug]) {\r\n        context.save();\r\n        call.debugFunction(...call.arguments);\r\n        context.restore();\r\n      }\r\n    }\r\n  }\r\n\r\n  // Used for persisting the debug calls on canvas (shifts array of debug calls to limit array size to frames)\r\n  private static limitDebugCalls(\r\n    drawing: Drawing,\r\n    key: string,\r\n    frames: number\r\n  ) {\r\n    if (\r\n      frames &&\r\n      drawing.debugCalls[key] &&\r\n      frames - 1 < drawing.debugCalls[key].length\r\n    ) {\r\n      drawing.debugCalls[key].shift();\r\n    } else {\r\n      (!drawing.debugCalls[key] || !frames) && (drawing.debugCalls[key] = []);\r\n    }\r\n  }\r\n}\r\n","import { Canvas, Debug, Node, Color } from \".\";\r\nimport { Vector2 } from \"../math\";\r\nimport { Empty } from \"../view\";\r\n\r\nexport interface IDebugCall {\r\n  [key: string]: {\r\n    debugFunction: Function;\r\n    arguments: any[];\r\n    frames?: number;\r\n  }[];\r\n}\r\n\r\n/**\r\n * Stores all views which will be rendered by canvas\r\n */\r\nexport class Drawing {\r\n  // Scene-graph root node\r\n  private renderTree: Node;\r\n  /**@hidden */\r\n  debugCalls: IDebugCall;\r\n\r\n  colorToNode: { [key: string]: Node };\r\n  mousePos: Vector2;\r\n\r\n  /**\r\n   *\r\n   * @param canvas The Canvas object\r\n   * @param globalUpdate A function that will be called per frame\r\n   */\r\n  constructor(public canvas: Canvas, public globalUpdate?: Function) {\r\n    let rootNode = new Empty(\"#Root\", Vector2.Zero());\r\n    rootNode.context = this.canvas.context;\r\n    rootNode.drawing = this;\r\n    this.renderTree = rootNode;\r\n    this.debugCalls = {};\r\n\r\n    this.mousePos = Vector2.Zero();\r\n    this.colorToNode = {};\r\n    this._registerEvents();\r\n  }\r\n\r\n  _registerEvents(): void {\r\n    let currentHitNode: Node, prevHitNode: Node;\r\n    let currentDragNode: Node = null;\r\n    let canvasOffset: DOMRect;\r\n\r\n    this.canvas.canvasElement.onmousemove = (ev) => {\r\n      canvasOffset = this.canvas.canvasElement.getBoundingClientRect();\r\n      this.mousePos.x = ev.clientX - canvasOffset.left;\r\n      this.mousePos.y = ev.clientY - canvasOffset.top;\r\n\r\n      currentHitNode = this._getHitNode(this.mousePos);\r\n      if (currentHitNode != prevHitNode) {\r\n        prevHitNode && prevHitNode.call(\"mouseexit\");\r\n        currentHitNode && currentHitNode.call(\"mouseenter\");\r\n      }\r\n      prevHitNode = currentHitNode;\r\n\r\n      currentDragNode && currentDragNode.call(\"drag\", [this.mousePos.clone()]);\r\n    };\r\n\r\n    this.canvas.canvasElement.onmousedown = () => {\r\n      currentDragNode = currentHitNode;\r\n\r\n      let hitNode = this._getHitNode(this.mousePos);\r\n      hitNode && hitNode.call(\"mousedown\");\r\n    };\r\n\r\n    this.canvas.canvasElement.onmouseup = () => {\r\n      currentDragNode = null;\r\n\r\n      let hitNode = this._getHitNode(this.mousePos);\r\n      hitNode && hitNode.call(\"mouseup\");\r\n    };\r\n\r\n    this.canvas.canvasElement.onclick = () => {\r\n      let hitNode = this._getHitNode(this.mousePos);\r\n      hitNode && hitNode.call(\"click\");\r\n    };\r\n\r\n    this.canvas.canvasElement.oncontextmenu = (ev) => {\r\n      ev.preventDefault();\r\n\r\n      let hitNode = this._getHitNode(this.mousePos);\r\n      hitNode && hitNode.call(\"rightclick\");\r\n    };\r\n  }\r\n\r\n  _getHitNode(position: Vector2): Node {\r\n    return this.colorToNode[\r\n      Color.rgbToHex(\r\n        this.canvas.offContext.getImageData(position.x, position.y, 1, 1).data\r\n      )\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * @hidden\r\n   */\r\n  render() {\r\n    this.canvas.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    this.canvas.offContext.clearRect(\r\n      0,\r\n      0,\r\n      this.canvas.width,\r\n      this.canvas.height\r\n    );\r\n\r\n    this.renderTree.call(\"update\");\r\n\r\n    this.globalUpdate && this.globalUpdate();\r\n\r\n    this.renderTree.transform.childs.forEach((child) => {\r\n      child.updateWorldTransform();\r\n    });\r\n\r\n    this.renderTree.transform.childs.forEach((child) => {\r\n      child.node.render();\r\n    });\r\n\r\n    Debug.show(this.debugCalls, this.canvas.context);\r\n    window.requestAnimationFrame(this.render.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Adds a view object to this drawing\r\n   *\r\n   * @param node A View object to be rendered\r\n   */\r\n  add(node: Node | Node[]): void {\r\n    if (node instanceof Node) {\r\n      node.parent = this.renderTree;\r\n      node.setContext(this.canvas.context, this.canvas.offContext);\r\n      node.setDrawing(this);\r\n      node.setHitColor();\r\n    } else {\r\n      node.forEach((cNode) => {\r\n        cNode.parent = this.renderTree;\r\n        cNode.setContext(this.canvas.context, this.canvas.offContext);\r\n        cNode.setDrawing(this);\r\n        cNode.setHitColor();\r\n      });\r\n    }\r\n  }\r\n\r\n  remove(nodeOrID: Node | string) {\r\n    if (nodeOrID instanceof Node) nodeOrID = nodeOrID.id;\r\n\r\n    let queue = [];\r\n    let currentNode;\r\n    queue.push(this.renderTree);\r\n\r\n    while ((currentNode = queue.shift())) {\r\n      if (currentNode.id == nodeOrID) {\r\n        currentNode.transform.parent.childs.splice(\r\n          currentNode.transform.parent.childs.indexOf(currentNode.transform),\r\n          1\r\n        );\r\n      } else {\r\n        currentNode.transform.childs.forEach((child) => {\r\n          queue.push(child.node);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  _debugSceneGraph(root: Node, indent: string): void {\r\n    console.log(indent + root.id + \"[\" + root.order + \"]\");\r\n\r\n    root.transform.childs.forEach((child) => {\r\n      this._debugSceneGraph(child.node, \" \" + indent);\r\n    });\r\n  }\r\n}\r\n","export * from \"./canvas\";\r\nexport * from \"./color\";\r\nexport * from \"./debug\";\r\nexport * from \"./drawing\";\r\nexport * from \"./event\";\r\nexport * from \"./node\";\r\n","import { Transform, Vector2 } from \"../math\";\r\nimport { Drawing, Event, Color } from \".\";\r\n\r\n/**@hidden */\r\nexport abstract class Node implements Event {\r\n  drawing: Drawing;\r\n  context: CanvasRenderingContext2D;\r\n  offContext: OffscreenCanvasRenderingContext2D;\r\n  transform: Transform;\r\n  registeredEvents: any;\r\n  order: number;\r\n  hitColor: string;\r\n\r\n  abstract _render(): void;\r\n  abstract _offRender(): void;\r\n  abstract getDimension(): Vector2;\r\n\r\n  get zIndex(): number {\r\n    return this.order;\r\n  }\r\n\r\n  set zIndex(zIndex: number) {\r\n    this.order = zIndex;\r\n\r\n    if (this.parent) {\r\n      this.parent.transform.childs.sort((a, b) => {\r\n        return a.node.order - b.node.order;\r\n      });\r\n    }\r\n  }\r\n\r\n  get parent(): Node {\r\n    return this.transform.parent.node;\r\n  }\r\n  set parent(newParent: Node) {\r\n    this.transform.parent = newParent.transform;\r\n  }\r\n\r\n  get childs(): Node[] {\r\n    return this.transform.childs.map((child) => {\r\n      return child.node;\r\n    });\r\n  }\r\n\r\n  get position(): Vector2 {\r\n    return this.transform.position;\r\n  }\r\n  set position(position: Vector2) {\r\n    this.transform.position = position;\r\n  }\r\n  get absolutePosition(): Vector2 {\r\n    return this.transform.absolutePosition;\r\n  }\r\n\r\n  get rotation(): number {\r\n    return this.transform.rotation;\r\n  }\r\n  set rotation(degrees: number) {\r\n    this.transform.rotation = degrees;\r\n  }\r\n\r\n  get localRotation(): number {\r\n    return this.transform.localRotation;\r\n  }\r\n  set localRotation(degrees: number) {\r\n    this.transform.localRotation = degrees;\r\n  }\r\n\r\n  get scale(): Vector2 {\r\n    return this.transform.scale;\r\n  }\r\n  set scale(scale: Vector2) {\r\n    this.transform.scale = scale;\r\n  }\r\n\r\n  constructor(public id: string, position: Vector2, controlPoints: Vector2[]) {\r\n    this.transform = new Transform(\r\n      position,\r\n      0,\r\n      0,\r\n      Vector2.One(),\r\n      controlPoints,\r\n      this\r\n    );\r\n    this.registeredEvents = {};\r\n    this.order = 0;\r\n  }\r\n\r\n  setHitColor() {\r\n    // Set unique color for hit detection in offscreen canvas\r\n    let color: string = Color.Random();\r\n    while (this.drawing.colorToNode[color]) {\r\n      color = Color.Random();\r\n    }\r\n\r\n    this.hitColor = color;\r\n    this.drawing.colorToNode[color] = this;\r\n\r\n    this.transform.childs.forEach((child) => {\r\n      child.node.setHitColor();\r\n    });\r\n  }\r\n\r\n  on(eventKey: string, callback: Function): void {\r\n    this.registeredEvents[eventKey] = callback;\r\n  }\r\n\r\n  render(): void {\r\n    this.context.save();\r\n    this._render();\r\n    this.context.restore();\r\n    this.offRender();\r\n\r\n    for (var child of this.transform.childs) {\r\n      child.node.render();\r\n    }\r\n  }\r\n\r\n  offRender(): void {\r\n    this.offContext.save();\r\n    this._offRender();\r\n    this.offContext.restore();\r\n  }\r\n\r\n  call(method: string, args?: any[]) {\r\n    if (this.registeredEvents[method]) {\r\n      if (args) {\r\n        this.registeredEvents[method](this, ...args);\r\n      } else {\r\n        this.registeredEvents[method](this);\r\n      }\r\n    }\r\n\r\n    for (var child of this.transform.childs) {\r\n      child.node.call(method, args);\r\n    }\r\n  }\r\n\r\n  setContext(\r\n    context: CanvasRenderingContext2D,\r\n    offContext: OffscreenCanvasRenderingContext2D\r\n  ) {\r\n    this.context = context;\r\n    this.offContext = offContext;\r\n    this.transform.childs.forEach((child) => {\r\n      child.node.setContext(context, offContext);\r\n    });\r\n  }\r\n\r\n  setDrawing(drawing: Drawing) {\r\n    this.drawing = drawing;\r\n    this.transform.childs.forEach((child) => {\r\n      child.node.setDrawing(drawing);\r\n    });\r\n  }\r\n\r\n  dispose(): void {\r\n    this.drawing.remove(this.id);\r\n  }\r\n}\r\n","export class Dimension {\r\n  constructor(public width: number, public height: number) {}\r\n\r\n  max() {\r\n    return Math.max(this.width, this.height);\r\n  }\r\n}\r\n","export * from \"./dimension\";\r\nexport * from \"./matrix\";\r\nexport * from \"./transform\";\r\nexport * from \"./vector\";\r\n","/**\r\n * A 3x3 Matrix\r\n */\r\nexport class Matrix {\r\n  value: number[][];\r\n\r\n  constructor(value: number[][]) {\r\n    this.value = value;\r\n  }\r\n\r\n  multiply(another: Matrix | number[][]): Matrix {\r\n    let result;\r\n    if (another instanceof Matrix) {\r\n      result = [...Array(this.value.length)].map(() =>\r\n        Array(another.value[0].length)\r\n      );\r\n\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        for (let j = 0; j < another.value[0].length; j++) {\r\n          let sum = 0;\r\n          for (let k = 0; k < this.value[0].length; k++) {\r\n            sum += this.value[i][k] * another.value[k][j];\r\n          }\r\n          result[i][j] = sum;\r\n        }\r\n      }\r\n    } else {\r\n      result = [...Array(this.value.length)].map(() =>\r\n        Array(another[0].length)\r\n      );\r\n\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        for (let j = 0; j < another[0].length; j++) {\r\n          let sum = 0;\r\n          for (let k = 0; k < this.value[0].length; k++) {\r\n            sum += this.value[i][k] * another[k][j];\r\n          }\r\n          result[i][j] = sum;\r\n        }\r\n      }\r\n    }\r\n\r\n    return new Matrix(result);\r\n  }\r\n\r\n  multiplyInPlace(another: Matrix | number[][]): Matrix {\r\n    let result;\r\n    if (another instanceof Matrix) {\r\n      result = [...Array(this.value.length)].map(() =>\r\n        Array(another.value[0].length)\r\n      );\r\n\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        for (let j = 0; j < another.value[0].length; j++) {\r\n          let sum = 0;\r\n          for (let k = 0; k < this.value[0].length; k++) {\r\n            sum += this.value[i][k] * another.value[k][j];\r\n          }\r\n          result[i][j] = sum;\r\n        }\r\n      }\r\n    } else {\r\n      result = [...Array(this.value.length)].map(() =>\r\n        Array(another[0].length)\r\n      );\r\n\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        for (let j = 0; j < another[0].length; j++) {\r\n          let sum = 0;\r\n          for (let k = 0; k < this.value[0].length; k++) {\r\n            sum += this.value[i][k] * another[k][j];\r\n          }\r\n          result[i][j] = sum;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.value = result;\r\n    return this;\r\n  }\r\n\r\n  clone() {\r\n    return new Matrix([\r\n      [this.value[0][0], this.value[0][1], this.value[0][2]],\r\n      [this.value[1][0], this.value[1][1], this.value[1][2]],\r\n      [this.value[2][0], this.value[2][1], this.value[2][2]],\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * Decomposes the rotation component from matrix to get absolute rotation for a child transform\r\n   */\r\n  getRotation(): number {\r\n    return Math.atan2(this.value[0][1], this.value[0][0]) * (180 / Math.PI);\r\n  }\r\n\r\n  static Identity() {\r\n    return new Matrix([\r\n      [1, 0, 0],\r\n      [0, 1, 0],\r\n      [0, 0, 1],\r\n    ]);\r\n  }\r\n\r\n  static Zero() {\r\n    return new Matrix([\r\n      [0, 0, 0],\r\n      [0, 0, 0],\r\n      [0, 0, 0],\r\n    ]);\r\n  }\r\n\r\n  static Multiply(matrix1: number[][], matrix2: number[][]) {\r\n    let result = [...Array(matrix1.length)].map(() => Array(matrix2[0].length));\r\n\r\n    for (let i = 0; i < matrix1.length; i++) {\r\n      for (let j = 0; j < matrix2[0].length; j++) {\r\n        let sum = 0;\r\n        for (let k = 0; k < matrix1[0].length; k++) {\r\n          sum += matrix1[i][k] * matrix2[k][j];\r\n        }\r\n        result[i][j] = sum;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n","import { Matrix, Vector2 } from \".\";\r\nimport { Constant } from \"../common\";\r\nimport { Node } from \"../core\";\r\n\r\n// Stores a node's transform (position, rotation, scale)\r\nexport class Transform {\r\n  // reference control points to apply transform to\r\n  refControlPoints: Vector2[];\r\n  // transformed control points\r\n  controlPoints: Vector2[];\r\n  localTrasform: Matrix;\r\n  worldTransform: Matrix;\r\n  _parent: Transform;\r\n  childs: Transform[];\r\n\r\n  get parent(): Transform {\r\n    return this._parent;\r\n  }\r\n  set parent(newParent: Transform) {\r\n    if (this._parent) {\r\n      this._parent.childs.indexOf(this) &&\r\n        this._parent.childs.splice(this._parent.childs.indexOf(this), 1);\r\n    }\r\n    newParent && newParent.childs.push(this);\r\n    this._parent = newParent;\r\n\r\n    if (this.parent) {\r\n      this.parent.childs.sort((a, b) => {\r\n        return a.node.order - b.node.order;\r\n      });\r\n    }\r\n  }\r\n\r\n  get position(): Vector2 {\r\n    return this._position;\r\n  }\r\n  set position(newPosition: Vector2) {\r\n    this._position = newPosition;\r\n  }\r\n\r\n  get absolutePosition(): Vector2 {\r\n    return Vector2.Zero().transform(this.worldTransform);\r\n  }\r\n\r\n  get rotation(): number {\r\n    return this._rotation;\r\n  }\r\n  set rotation(degrees: number) {\r\n    this._rotation = degrees % 360;\r\n  }\r\n\r\n  get localRotation(): number {\r\n    return this._localRotation;\r\n  }\r\n  set localRotation(newRotation: number) {\r\n    this._localRotation = newRotation % 360;\r\n  }\r\n\r\n  get scale(): Vector2 {\r\n    return this._scale;\r\n  }\r\n  set scale(newScale: Vector2) {\r\n    this._scale = newScale;\r\n  }\r\n\r\n  constructor(\r\n    public _position: Vector2,\r\n    public _localRotation: number,\r\n    public _rotation: number,\r\n    public _scale: Vector2,\r\n    controlPoints: Vector2[],\r\n    public node: Node\r\n  ) {\r\n    this._parent = null;\r\n    this.childs = [];\r\n    this.localTrasform = Matrix.Identity();\r\n    this.worldTransform = Matrix.Identity();\r\n    this.refControlPoints = this.relativeControlPoints(controlPoints);\r\n    this.controlPoints = [...controlPoints];\r\n  }\r\n\r\n  private relativeControlPoints(controlPoints: Vector2[]): Vector2[] {\r\n    let result: Vector2[] = [];\r\n    controlPoints.forEach((controlPoint) => {\r\n      result.push(controlPoint.subtract(this.position));\r\n    });\r\n    return result;\r\n  }\r\n\r\n  // Updates this node's worldTransform using parent's worldTransform if any\r\n  updateWorldTransform(parentWorldTransform?: Matrix) {\r\n    // Set translation\r\n    this.localTrasform.value = [\r\n      [1, 0, 0],\r\n      [0, 1, 0],\r\n      [this.position.x, this.position.y, 1],\r\n    ];\r\n\r\n    let cos;\r\n    let sin;\r\n    // Transform rotation\r\n    if (this.parent.node.id != \"#Root\") {\r\n      cos = Math.cos(this.rotation * Constant.TAU);\r\n      sin = Math.sin(this.rotation * Constant.TAU);\r\n\r\n      this.localTrasform = new Matrix([\r\n        [1, 0, 0],\r\n        [0, 1, 0],\r\n        [this.position.x, this.position.y, 1],\r\n      ])\r\n        .multiply([\r\n          [cos, sin, 0],\r\n          [-sin, cos, 0],\r\n          [0, 0, 1],\r\n        ])\r\n        .multiply([\r\n          [1, 0, 0],\r\n          [0, 1, 0],\r\n          [-this.position.x, -this.position.y, 1],\r\n        ])\r\n        .multiply(this.localTrasform);\r\n    }\r\n\r\n    // Transform localRotation\r\n    cos = Math.cos(this.localRotation * Constant.TAU);\r\n    sin = Math.sin(this.localRotation * Constant.TAU);\r\n    this.localTrasform = new Matrix([\r\n      [cos, sin, 0],\r\n      [-sin, cos, 0],\r\n      [0, 0, 1],\r\n    ]).multiply(this.localTrasform);\r\n\r\n    // Transform scale\r\n    this.localTrasform = new Matrix([\r\n      [this.scale.x, 0, 0],\r\n      [0, this.scale.y, 0],\r\n      [0, 0, 1],\r\n    ]).multiply(this.localTrasform);\r\n\r\n    if (parentWorldTransform) {\r\n      this.worldTransform = this.localTrasform.multiply(parentWorldTransform);\r\n    } else {\r\n      this.worldTransform = this.localTrasform.clone();\r\n    }\r\n\r\n    this.childs.forEach((child) => {\r\n      child.updateWorldTransform(this.worldTransform);\r\n    });\r\n\r\n    this.applyTransform();\r\n  }\r\n\r\n  // Transforms each control point using this node's worldTransform\r\n  private applyTransform() {\r\n    this.refControlPoints.forEach((controlPoint, index) => {\r\n      this.controlPoints[index] = controlPoint.transform(this.worldTransform);\r\n    });\r\n  }\r\n}\r\n","import { Canvas } from \"../core\";\r\nimport { Constant } from \"../common\";\r\nimport { Matrix } from \"../math\";\r\n\r\n/**\r\n * Stores 2D Vector\r\n */\r\nexport class Vector2 {\r\n  tmpX: number;\r\n  tmpY: number;\r\n\r\n  constructor(public x: number, public y: number) {}\r\n\r\n  toString() {\r\n    return \"[\" + this.x.toFixed(3) + \", \" + this.y.toFixed(3) + \"]\";\r\n  }\r\n\r\n  add(arg1: number | Vector2, arg2?: number): Vector2 {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      return new Vector2(this.x + arg1.x, this.y + arg1.y);\r\n    } else if (typeof arg2 === \"undefined\") {\r\n      return new Vector2(this.x + arg1, this.y + arg1);\r\n    } else {\r\n      return new Vector2(this.x + arg1, this.y + arg2);\r\n    }\r\n  }\r\n\r\n  addInPlace(arg1: number | Vector2, arg2?: number): Vector2 {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      this.x += arg1.x;\r\n      this.y += arg1.y;\r\n    } else if (!arg2) {\r\n      this.x += arg1;\r\n      this.y += arg1;\r\n    } else {\r\n      this.x += arg1;\r\n      this.y += arg2;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  multiply(arg1: number | Vector2, arg2?: number): Vector2 {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      return new Vector2(this.x * arg1.x, this.y * arg1.y);\r\n    } else {\r\n      return new Vector2(this.x * arg1, this.y * arg2);\r\n    }\r\n  }\r\n\r\n  multiplyInPlace(arg1: number | Vector2, arg2?: number): Vector2 {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      this.x *= arg1.x;\r\n      this.y *= arg1.y;\r\n    } else if (!arg2) {\r\n      this.x *= arg1;\r\n      this.y *= arg1;\r\n    } else {\r\n      this.x *= arg1;\r\n      this.y *= arg2;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  subtract(arg1: number | Vector2, arg2?: number): Vector2 {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      return new Vector2(this.x - arg1.x, this.y - arg1.y);\r\n    } else {\r\n      return new Vector2(this.x - arg1, this.y - arg2);\r\n    }\r\n  }\r\n\r\n  subtractInPlace(arg1: number | Vector2, arg2?: number): void {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      this.x -= arg1.x;\r\n      this.y -= arg1.y;\r\n    } else {\r\n      this.x -= arg1;\r\n      this.y -= arg2;\r\n    }\r\n  }\r\n\r\n  rotate(pivot: Vector2, degrees: number): Vector2 {\r\n    degrees = degrees * Constant.TAU;\r\n    let cosT = Math.cos(degrees);\r\n    let sinT = Math.sin(degrees);\r\n    return new Vector2(\r\n      cosT * (this.x - pivot.x) - sinT * (this.y - pivot.y) + pivot.x,\r\n      sinT * (this.x - pivot.x) + cosT * (this.y - pivot.y) + pivot.y\r\n    );\r\n  }\r\n\r\n  rotateInPlace(pivot: Vector2, degrees: number): Vector2 {\r\n    degrees = degrees * Constant.TAU;\r\n    let cosT = Math.cos(degrees);\r\n    let sinT = Math.sin(degrees);\r\n    this.tmpX = cosT * (this.x - pivot.x) - sinT * (this.y - pivot.y) + pivot.x;\r\n    this.tmpY = sinT * (this.x - pivot.x) + cosT * (this.y - pivot.y) + pivot.y;\r\n    this.x = this.tmpX;\r\n    this.y = this.tmpY;\r\n    return this;\r\n  }\r\n\r\n  max() {\r\n    return Math.max(this.x, this.y);\r\n  }\r\n\r\n  transform(matrix: Matrix) {\r\n    let result = Matrix.Multiply([[this.x, this.y, 1]], matrix.value);\r\n    return new Vector2(result[0][0], result[0][1]);\r\n  }\r\n\r\n  transformInPlace(matrix: Matrix) {\r\n    let result = Matrix.Multiply([[this.x, this.y, 1]], matrix.value);\r\n    this.x = result[0][0];\r\n    this.y = result[0][1];\r\n  }\r\n\r\n  static Midpoint(vector1: Vector2, vector2: Vector2): Vector2 {\r\n    return new Vector2(\r\n      (vector1.x + vector2.x) / 2,\r\n      (vector1.y + vector2.y) / 2\r\n    );\r\n  }\r\n\r\n  static Distance(vector1: Vector2, vector2: Vector2): number {\r\n    return Math.sqrt(\r\n      Math.pow(vector2.x - vector1.x, 2) + Math.pow(vector2.y - vector1.y, 2)\r\n    );\r\n  }\r\n\r\n  static Zero(): Vector2 {\r\n    return new Vector2(0, 0);\r\n  }\r\n\r\n  static One(): Vector2 {\r\n    return new Vector2(1, 1);\r\n  }\r\n\r\n  static Bounds(vectors: Vector2[]): Vector2[] {\r\n    let minVec = new Vector2(Number.MAX_VALUE, Number.MAX_VALUE);\r\n    let maxVec = new Vector2(Number.MIN_VALUE, Number.MIN_VALUE);\r\n\r\n    vectors.forEach((vector) => {\r\n      if (vector.x < minVec.x) minVec.x = vector.x;\r\n      if (vector.y < minVec.y) minVec.y = vector.y;\r\n      if (vector.x > maxVec.x) maxVec.x = vector.x;\r\n      if (vector.y > maxVec.y) maxVec.y = vector.y;\r\n    });\r\n    return [minVec, maxVec];\r\n  }\r\n\r\n  static Average(vectors: Vector2[]): Vector2 {\r\n    let sumX = 0;\r\n    let sumY = 0;\r\n    vectors.forEach((vector) => {\r\n      sumX += vector.x;\r\n      sumY += vector.y;\r\n    });\r\n    return new Vector2(sumX / vectors.length, sumY / vectors.length);\r\n  }\r\n\r\n  static Random(\r\n    minXOrCanvas: number | Canvas,\r\n    maxX?: number,\r\n    minY?: number,\r\n    maxY?: number\r\n  ): Vector2 {\r\n    if (minXOrCanvas instanceof Canvas) {\r\n      return new Vector2(\r\n        Math.random() * minXOrCanvas.width,\r\n        Math.random() * minXOrCanvas.height\r\n      );\r\n    } else {\r\n      return new Vector2(\r\n        Math.random() * (maxX - minXOrCanvas) + minXOrCanvas,\r\n        Math.random() * (maxY - minY) + minY\r\n      );\r\n    }\r\n  }\r\n\r\n  static Lerp(start: Vector2, end: Vector2, amount: number): Vector2 {\r\n    return new Vector2(\r\n      start.x + (end.x - start.x) * amount,\r\n      start.y + (end.y - start.y) * amount\r\n    );\r\n  }\r\n\r\n  clone(): Vector2 {\r\n    return new Vector2(this.x, this.y);\r\n  }\r\n}\r\n","export * from \"./common\";\r\nexport * as View from \"./view\";\r\nexport * from \"./core\";\r\nexport * from \"./math\";\r\n","import { Vector2 } from \"../math\";\r\nimport { LinearGradient, RadialGradient } from \".\";\r\nimport { Node } from \"../core\";\r\n\r\ninterface IEllipseProperties {\r\n  outline?: boolean;\r\n  fill?: boolean;\r\n  outlineColor?: string | LinearGradient | RadialGradient;\r\n  fillColor?: string | LinearGradient | RadialGradient;\r\n  outlineWidth?: number;\r\n  outlineDashSegments?: number[];\r\n  shadowColor?: string;\r\n  shadowOffset?: Vector2;\r\n  staticShadow?: boolean;\r\n  shadowBlur?: number;\r\n}\r\n\r\nexport class Ellipse extends Node {\r\n  constructor(\r\n    id: string,\r\n    position: Vector2,\r\n    public minor: number,\r\n    public major: number,\r\n    public props?: IEllipseProperties\r\n  ) {\r\n    super(id, position, [\r\n      position.subtract(0, minor),\r\n      position.add(major, 0),\r\n      position.add(0, minor),\r\n      position.subtract(major, 0),\r\n    ]);\r\n\r\n    !props && (this.props = {});\r\n    if (this.props.outlineColor && typeof this.props.outlineColor != \"string\") {\r\n      this.props.outlineColor.node = this;\r\n    }\r\n    if (this.props.fillColor && typeof this.props.fillColor != \"string\") {\r\n      this.props.fillColor.node = this;\r\n    }\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      this.props.outlineColor &&\r\n        (this.context.strokeStyle =\r\n          typeof this.props.outlineColor == \"string\"\r\n            ? this.props.outlineColor\r\n            : this.props.outlineColor.create(this.context));\r\n      this.props.fillColor &&\r\n        (this.context.fillStyle =\r\n          typeof this.props.fillColor == \"string\"\r\n            ? this.props.fillColor\r\n            : this.props.fillColor.create(this.context));\r\n      this.props.outlineWidth &&\r\n        (this.context.lineWidth = this.props.outlineWidth);\r\n      this.props.outlineDashSegments &&\r\n        this.context.setLineDash(this.props.outlineDashSegments);\r\n      this.props.shadowColor &&\r\n        (this.context.shadowColor = this.props.shadowColor);\r\n      this.props.shadowBlur &&\r\n        (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset\r\n            .transform(this.transform.worldTransform)\r\n            .subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    let position = this.absolutePosition;\r\n    this.context.beginPath();\r\n    if (this.minor == this.major) {\r\n      this.context.arc(position.x, position.y, this.minor, 0, 2 * Math.PI);\r\n    } else {\r\n      this.context.ellipse(\r\n        position.x,\r\n        position.y,\r\n        this.major,\r\n        this.minor,\r\n        Math.atan2(\r\n          this.transform.controlPoints[1].y - position.y,\r\n          this.transform.controlPoints[1].x - position.x\r\n        ),\r\n        0,\r\n        2 * Math.PI\r\n      );\r\n    }\r\n    if (this.props.fill) {\r\n      this.context.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.context.stroke();\r\n    }\r\n  }\r\n\r\n  _offRender(): void {\r\n    this.props.outlineWidth &&\r\n      (this.offContext.lineWidth = this.props.outlineWidth);\r\n    this.offContext.strokeStyle = this.hitColor;\r\n    this.offContext.fillStyle = this.hitColor;\r\n\r\n    let position = this.absolutePosition;\r\n    this.offContext.beginPath();\r\n    if (this.minor == this.major) {\r\n      this.offContext.arc(position.x, position.y, this.minor, 0, 2 * Math.PI);\r\n    } else {\r\n      this.offContext.ellipse(\r\n        position.x,\r\n        position.y,\r\n        this.major,\r\n        this.minor,\r\n        Math.atan2(\r\n          this.transform.controlPoints[1].y - position.y,\r\n          this.transform.controlPoints[1].x - position.x\r\n        ),\r\n        0,\r\n        2 * Math.PI\r\n      );\r\n    }\r\n    if (this.props.fill) {\r\n      this.offContext.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.offContext.stroke();\r\n    }\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return new Vector2(\r\n      Vector2.Distance(\r\n        this.transform.controlPoints[1],\r\n        this.transform.controlPoints[3]\r\n      ),\r\n      Vector2.Distance(\r\n        this.transform.controlPoints[0],\r\n        this.transform.controlPoints[2]\r\n      )\r\n    );\r\n  }\r\n}\r\n","import { Vector2 } from \"../math\";\r\nimport { Node } from \"../core\";\r\n\r\nexport class Empty extends Node {\r\n  constructor(id: string, position: Vector2) {\r\n    super(id, position, []);\r\n  }\r\n\r\n  _render(): void {\r\n    /**/\r\n  }\r\n  _offRender(): void {\r\n    /**/\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return Vector2.Zero();\r\n  }\r\n}\r\n","import { Vector2 } from \"../math\";\r\nimport { Node } from \"../core\";\r\n\r\ninterface IImageProperties {\r\n  shadowColor?: string;\r\n  shadowOffset?: Vector2;\r\n  staticShadow?: boolean;\r\n  shadowBlur?: number;\r\n}\r\n\r\nexport class Image extends Node {\r\n  _source: HTMLImageElement;\r\n\r\n  constructor(\r\n    id: string,\r\n    position: Vector2,\r\n    source: string | HTMLImageElement,\r\n    public width: number,\r\n    public height: number,\r\n    public props?: IImageProperties\r\n  ) {\r\n    super(id, position, []);\r\n\r\n    !props && (this.props = {});\r\n    if (typeof source == \"string\") {\r\n      this._source = new window.Image();\r\n      this._source.src = source;\r\n    } else {\r\n      this._source = source;\r\n    }\r\n    this._source.crossOrigin = \"Anonymous\";\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      this.props.shadowColor &&\r\n        (this.context.shadowColor = this.props.shadowColor);\r\n      this.props.shadowBlur &&\r\n        (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset\r\n            .transform(this.transform.worldTransform)\r\n            .subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Rotate image using worldTransform's rotation component\r\n    this.context.translate(this.absolutePosition.x, this.absolutePosition.y);\r\n    this.context.rotate(\r\n      this.transform.worldTransform.getRotation() * (Math.PI / 180)\r\n    );\r\n    this.context.translate(-this.absolutePosition.x, -this.absolutePosition.y);\r\n\r\n    let topLeft = this.absolutePosition.subtract(\r\n      (this.width * this.transform.scale.x) / 2,\r\n      (this.height * this.transform.scale.y) / 2\r\n    );\r\n    this.context.drawImage(\r\n      this._source,\r\n      topLeft.x,\r\n      topLeft.y,\r\n      this.width * this.transform.scale.x,\r\n      this.height * this.transform.scale.y\r\n    );\r\n  }\r\n\r\n  _offRender(): void {\r\n    this.offContext.fillStyle = this.hitColor;\r\n\r\n    // Rotate bounding-rectangle using worldTransform's rotation component\r\n    this.offContext.translate(this.absolutePosition.x, this.absolutePosition.y);\r\n    this.offContext.rotate(\r\n      this.transform.worldTransform.getRotation() * (Math.PI / 180)\r\n    );\r\n    this.offContext.translate(\r\n      -this.absolutePosition.x,\r\n      -this.absolutePosition.y\r\n    );\r\n\r\n    let topLeft = this.absolutePosition.subtract(\r\n      (this.width * this.transform.scale.x) / 2,\r\n      (this.height * this.transform.scale.y) / 2\r\n    );\r\n    this.offContext.fillRect(\r\n      topLeft.x,\r\n      topLeft.y,\r\n      this.width * this.transform.scale.x,\r\n      this.height * this.transform.scale.y\r\n    );\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return new Vector2(this.width, this.height);\r\n  }\r\n}\r\n","export * from \"./ellipse\";\r\nexport * from \"./empty\";\r\nexport * from \"./image\";\r\nexport * from \"./line\";\r\nexport * from \"./polygon\";\r\nexport * from \"./rectangle\";\r\nexport * from \"./text\";\r\nexport * from \"./linear-gradient\";\r\nexport * from \"./radial-gradient\";\r\n","import { Vector2 } from \"../math\";\r\nimport { LinearGradient, RadialGradient } from \".\";\r\nimport { Node } from \"../core\";\r\n\r\ninterface ILineProperties {\r\n  color?: string | LinearGradient | RadialGradient;\r\n  lineWidth?: number;\r\n  lineCap?: CanvasLineCap;\r\n  lineDashSegments?: number[];\r\n  shadowColor?: string;\r\n  shadowOffset?: Vector2;\r\n  staticShadow?: boolean;\r\n  shadowBlur?: number;\r\n}\r\n\r\nexport class Line extends Node {\r\n  get from(): Vector2 {\r\n    if (this._from instanceof Node) return this._from.absolutePosition;\r\n    else return this.transform.controlPoints[0];\r\n  }\r\n  get to(): Vector2 {\r\n    if (this._to instanceof Node) return this._to.absolutePosition;\r\n    else return this.transform.controlPoints[1];\r\n  }\r\n\r\n  constructor(\r\n    id: string,\r\n    public _from: Vector2 | Node,\r\n    public _to: Vector2 | Node,\r\n    pivot?: number,\r\n    public props?: ILineProperties\r\n  ) {\r\n    super(\r\n      id,\r\n      _from instanceof Vector2 && _to instanceof Vector2\r\n        ? pivot\r\n          ? _from.add((_to.x - _from.x) * pivot, (_to.y - _from.y) * pivot)\r\n          : _from.clone()\r\n        : Vector2.Zero(),\r\n      _from instanceof Vector2 && _to instanceof Vector2 ? [_from, _to] : []\r\n    );\r\n\r\n    !props && (this.props = {});\r\n    if (this.props.color && typeof this.props.color != \"string\") {\r\n      this.props.color.node = this;\r\n    }\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      this.props.color &&\r\n        (this.context.strokeStyle =\r\n          typeof this.props.color == \"string\"\r\n            ? this.props.color\r\n            : this.props.color.create(this.context));\r\n      this.props.lineWidth && (this.context.lineWidth = this.props.lineWidth);\r\n      this.props.lineCap && (this.context.lineCap = this.props.lineCap);\r\n      this.props.lineDashSegments &&\r\n        this.context.setLineDash(this.props.lineDashSegments);\r\n      this.props.shadowColor &&\r\n        (this.context.shadowColor = this.props.shadowColor);\r\n      this.props.shadowBlur &&\r\n        (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset\r\n            .transform(this.transform.worldTransform)\r\n            .subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.context.beginPath();\r\n    this.context.moveTo(this.from.x, this.from.y);\r\n    this.context.lineTo(this.to.x, this.to.y);\r\n    this.context.stroke();\r\n  }\r\n\r\n  _offRender(): void {\r\n    this.props.lineWidth && (this.offContext.lineWidth = this.props.lineWidth);\r\n    this.offContext.strokeStyle = this.hitColor;\r\n\r\n    this.offContext.beginPath();\r\n    this.offContext.moveTo(this.from.x, this.from.y);\r\n    this.offContext.lineTo(this.to.x, this.to.y);\r\n    this.offContext.stroke();\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return new Vector2(\r\n      Vector2.Distance(\r\n        this.transform.controlPoints[0],\r\n        this.transform.controlPoints[1]\r\n      ),\r\n      0\r\n    );\r\n  }\r\n}\r\n","import { Constant, Handle } from \"../common\";\r\nimport { Node } from \"../core\";\r\nimport { Vector2 } from \"../math\";\r\n\r\nexport class LinearGradient {\r\n  node: Node;\r\n\r\n  constructor(\r\n    public offset: Vector2,\r\n    public degrees: number,\r\n    public length: number | Handle,\r\n    public colors: string[],\r\n    public weights: number[]\r\n  ) {}\r\n\r\n  create(context: CanvasRenderingContext2D): CanvasGradient {\r\n    let gradient: CanvasGradient,\r\n      from,\r\n      to,\r\n      length,\r\n      delta = new Vector2(0, 0);\r\n\r\n    length =\r\n      this.length == Handle.AUTO ? this.node.getDimension().max() : this.length;\r\n    delta.x = (length / 2) * Math.cos(this.degrees * Constant.TAU);\r\n    delta.y = (length / 2) * Math.sin(this.degrees * Constant.TAU);\r\n\r\n    from = this.offset\r\n      .subtract(delta)\r\n      .transform(this.node.transform.worldTransform);\r\n    to = this.offset.add(delta).transform(this.node.transform.worldTransform);\r\n\r\n    gradient = context.createLinearGradient(from.x, from.y, to.x, to.y);\r\n    this.colors.forEach((color, index) => {\r\n      gradient.addColorStop(this.weights[index], color);\r\n    });\r\n    return gradient;\r\n  }\r\n}\r\n","import { Vector2 } from \"../math\";\r\nimport { LinearGradient, RadialGradient } from \".\";\r\nimport { Node } from \"../core\";\r\nimport { Handle } from \"../common\";\r\n\r\ninterface IPolygonProperties {\r\n  outline?: boolean;\r\n  fill?: boolean;\r\n  outlineColor?: string | LinearGradient | RadialGradient;\r\n  fillColor?: string | LinearGradient | RadialGradient;\r\n  outlineWidth?: number;\r\n  outlineDashSegments?: number[];\r\n  shadowColor?: string;\r\n  shadowOffset?: Vector2;\r\n  staticShadow?: boolean;\r\n  shadowBlur?: number;\r\n}\r\n\r\nexport class Polygon extends Node {\r\n  constructor(\r\n    id: string,\r\n    vertices: Vector2[],\r\n    center: Vector2 | Handle,\r\n    public props?: IPolygonProperties\r\n  ) {\r\n    super(\r\n      id,\r\n      center instanceof Vector2 ? center : Vector2.Average(vertices),\r\n      vertices\r\n    );\r\n\r\n    !props && (this.props = {});\r\n    if (this.props.outlineColor && typeof this.props.outlineColor != \"string\") {\r\n      this.props.outlineColor.node = this;\r\n    }\r\n    if (this.props.fillColor && typeof this.props.fillColor != \"string\") {\r\n      this.props.fillColor.node = this;\r\n    }\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      this.props.outlineColor &&\r\n        (this.context.strokeStyle =\r\n          typeof this.props.outlineColor == \"string\"\r\n            ? this.props.outlineColor\r\n            : this.props.outlineColor.create(this.context));\r\n      this.props.fillColor &&\r\n        (this.context.fillStyle =\r\n          typeof this.props.fillColor == \"string\"\r\n            ? this.props.fillColor\r\n            : this.props.fillColor.create(this.context));\r\n      this.props.outlineWidth &&\r\n        (this.context.lineWidth = this.props.outlineWidth);\r\n      this.props.outlineDashSegments &&\r\n        this.context.setLineDash(this.props.outlineDashSegments);\r\n      this.props.shadowColor &&\r\n        (this.context.shadowColor = this.props.shadowColor);\r\n      this.props.shadowBlur &&\r\n        (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset\r\n            .transform(this.transform.worldTransform)\r\n            .subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.context.beginPath();\r\n    this.context.moveTo(\r\n      this.transform.controlPoints[0].x,\r\n      this.transform.controlPoints[0].y\r\n    );\r\n    for (let index = 1; index < this.transform.controlPoints.length; index++) {\r\n      this.context.lineTo(\r\n        this.transform.controlPoints[index].x,\r\n        this.transform.controlPoints[index].y\r\n      );\r\n    }\r\n    this.context.closePath();\r\n\r\n    if (this.props.fill) {\r\n      this.context.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.context.stroke();\r\n    }\r\n  }\r\n\r\n  _offRender(): void {\r\n    this.props.outlineWidth &&\r\n      (this.offContext.lineWidth = this.props.outlineWidth);\r\n    this.offContext.strokeStyle = this.hitColor;\r\n    this.offContext.fillStyle = this.hitColor;\r\n\r\n    this.offContext.beginPath();\r\n    this.offContext.moveTo(\r\n      this.transform.controlPoints[0].x,\r\n      this.transform.controlPoints[0].y\r\n    );\r\n    for (let index = 1; index < this.transform.controlPoints.length; index++) {\r\n      this.offContext.lineTo(\r\n        this.transform.controlPoints[index].x,\r\n        this.transform.controlPoints[index].y\r\n      );\r\n    }\r\n    this.offContext.closePath();\r\n\r\n    if (this.props.fill) {\r\n      this.offContext.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.offContext.stroke();\r\n    }\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    let bounds = Vector2.Bounds(this.transform.controlPoints);\r\n\r\n    return new Vector2(\r\n      Math.abs(bounds[0].x - bounds[1].x),\r\n      Math.abs(bounds[0].y - bounds[1].y)\r\n    );\r\n  }\r\n}\r\n","import { Vector2 } from \"../math\";\r\nimport { Handle } from \"../common\";\r\nimport { Node } from \"../core\";\r\n\r\nexport class RadialGradient {\r\n  node: Node;\r\n\r\n  constructor(\r\n    public fromOffset: Vector2,\r\n    public fromRadius: number | Handle,\r\n    public toOffset: Vector2,\r\n    public toRadius: number | Handle,\r\n    public colors: string[],\r\n    public weights: number[]\r\n  ) {}\r\n\r\n  create(context: CanvasRenderingContext2D): CanvasGradient {\r\n    let gradient: CanvasGradient;\r\n    let fromCenter = this.fromOffset.transform(\r\n      this.node.transform.worldTransform\r\n    );\r\n    let toCenter = this.toOffset.transform(this.node.transform.worldTransform);\r\n    let fromRadius, toRadius;\r\n    if (this.fromRadius == Handle.AUTO || this.toRadius == Handle.AUTO) {\r\n      fromRadius = 1;\r\n      toRadius = this.node.getDimension().max() / 2;\r\n    } else {\r\n      fromRadius = this.fromRadius;\r\n      toRadius = this.toRadius;\r\n    }\r\n\r\n    gradient = context.createRadialGradient(\r\n      fromCenter.x,\r\n      fromCenter.y,\r\n      fromRadius,\r\n      toCenter.x,\r\n      toCenter.y,\r\n      toRadius\r\n    );\r\n    this.colors.forEach((color, index) => {\r\n      gradient.addColorStop(this.weights[index], color);\r\n    });\r\n    return gradient;\r\n  }\r\n}\r\n","import { Vector2 } from \"../math\";\r\nimport { LinearGradient, RadialGradient } from \".\";\r\nimport { Node } from \"../core\";\r\n\r\ninterface IRectangleProperties {\r\n  outline?: boolean;\r\n  fill?: boolean;\r\n  outlineColor?: string | LinearGradient | RadialGradient;\r\n  fillColor?: string | LinearGradient | RadialGradient;\r\n  outlineWidth?: number;\r\n  outlineDashSegments?: number[];\r\n  shadowColor?: string;\r\n  shadowOffset?: Vector2;\r\n  staticShadow?: boolean;\r\n  shadowBlur?: number;\r\n}\r\n\r\nexport class Rectangle extends Node {\r\n  constructor(\r\n    id: string,\r\n    position: Vector2,\r\n    width: number,\r\n    height: number,\r\n    public props?: IRectangleProperties\r\n  ) {\r\n    super(id, position, [\r\n      position.add(-width / 2, -height / 2),\r\n      position.add(width / 2, -height / 2),\r\n      position.add(width / 2, height / 2),\r\n      position.add(-width / 2, height / 2),\r\n    ]);\r\n\r\n    !props && (this.props = {});\r\n    if (this.props.outlineColor && typeof this.props.outlineColor != \"string\") {\r\n      this.props.outlineColor.node = this;\r\n    }\r\n    if (this.props.fillColor && typeof this.props.fillColor != \"string\") {\r\n      this.props.fillColor.node = this;\r\n    }\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      this.props.outlineColor &&\r\n        (this.context.strokeStyle =\r\n          typeof this.props.outlineColor == \"string\"\r\n            ? this.props.outlineColor\r\n            : this.props.outlineColor.create(this.context));\r\n      this.props.fillColor &&\r\n        (this.context.fillStyle =\r\n          typeof this.props.fillColor == \"string\"\r\n            ? this.props.fillColor\r\n            : this.props.fillColor.create(this.context));\r\n      this.props.outlineWidth &&\r\n        (this.context.lineWidth = this.props.outlineWidth);\r\n      this.props.outlineDashSegments &&\r\n        this.context.setLineDash(this.props.outlineDashSegments);\r\n      this.props.shadowColor &&\r\n        (this.context.shadowColor = this.props.shadowColor);\r\n      this.props.shadowBlur &&\r\n        (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset\r\n            .transform(this.transform.worldTransform)\r\n            .subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.context.beginPath();\r\n    this.context.moveTo(\r\n      this.transform.controlPoints[0].x,\r\n      this.transform.controlPoints[0].y\r\n    );\r\n    this.context.lineTo(\r\n      this.transform.controlPoints[1].x,\r\n      this.transform.controlPoints[1].y\r\n    );\r\n    this.context.lineTo(\r\n      this.transform.controlPoints[2].x,\r\n      this.transform.controlPoints[2].y\r\n    );\r\n    this.context.lineTo(\r\n      this.transform.controlPoints[3].x,\r\n      this.transform.controlPoints[3].y\r\n    );\r\n    this.context.lineTo(\r\n      this.transform.controlPoints[0].x,\r\n      this.transform.controlPoints[0].y\r\n    );\r\n    if (this.props.fill) {\r\n      this.context.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.context.stroke();\r\n    }\r\n  }\r\n\r\n  _offRender(): void {\r\n    this.props.outlineWidth &&\r\n      (this.offContext.lineWidth = this.props.outlineWidth);\r\n    this.offContext.strokeStyle = this.hitColor;\r\n    this.offContext.fillStyle = this.hitColor;\r\n\r\n    this.offContext.beginPath();\r\n    this.offContext.moveTo(\r\n      this.transform.controlPoints[0].x,\r\n      this.transform.controlPoints[0].y\r\n    );\r\n    this.offContext.lineTo(\r\n      this.transform.controlPoints[1].x,\r\n      this.transform.controlPoints[1].y\r\n    );\r\n    this.offContext.lineTo(\r\n      this.transform.controlPoints[2].x,\r\n      this.transform.controlPoints[2].y\r\n    );\r\n    this.offContext.lineTo(\r\n      this.transform.controlPoints[3].x,\r\n      this.transform.controlPoints[3].y\r\n    );\r\n    this.offContext.lineTo(\r\n      this.transform.controlPoints[0].x,\r\n      this.transform.controlPoints[0].y\r\n    );\r\n    if (this.props.fill) {\r\n      this.offContext.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.offContext.stroke();\r\n    }\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return new Vector2(\r\n      Vector2.Distance(\r\n        this.transform.controlPoints[0],\r\n        this.transform.controlPoints[1]\r\n      ),\r\n      Vector2.Distance(\r\n        this.transform.controlPoints[1],\r\n        this.transform.controlPoints[2]\r\n      )\r\n    );\r\n  }\r\n}\r\n","import { Vector2 } from \"../math\";\r\nimport { LinearGradient, RadialGradient } from \".\";\r\nimport { Node } from \"../core/node\";\r\n\r\ninterface ITextProperties {\r\n  font?: string;\r\n  outline?: boolean;\r\n  fill?: boolean;\r\n  outlineColor?: string | LinearGradient | RadialGradient;\r\n  fillColor?: string | LinearGradient | RadialGradient;\r\n  outlineWidth?: number;\r\n  shadowColor?: string;\r\n  shadowOffset?: Vector2;\r\n  staticShadow?: boolean;\r\n  shadowBlur?: number;\r\n}\r\n\r\nexport class Text extends Node {\r\n  _text: string;\r\n  _originalWidth: number;\r\n  _originalHeight: number;\r\n\r\n  get text(): string {\r\n    return this._text;\r\n  }\r\n  set text(text: string) {\r\n    this._text = text;\r\n  }\r\n\r\n  constructor(\r\n    id: string,\r\n    position: Vector2,\r\n    text: string,\r\n    public props?: ITextProperties\r\n  ) {\r\n    super(id, position, []);\r\n\r\n    !props && (this.props = {});\r\n    this.text = text;\r\n    if (this.props.outlineColor && typeof this.props.outlineColor != \"string\") {\r\n      this.props.outlineColor.node = this;\r\n    }\r\n    if (this.props.fillColor && typeof this.props.fillColor != \"string\") {\r\n      this.props.fillColor.node = this;\r\n    }\r\n\r\n    let textMetricContext = document.createElement(\"canvas\").getContext(\"2d\");\r\n    this.props.font && (textMetricContext.font = this.props.font);\r\n    this._originalWidth = textMetricContext.measureText(text).width;\r\n    this._originalHeight = textMetricContext.measureText(\"M\").width;\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      this.props.outlineColor &&\r\n        (this.context.strokeStyle =\r\n          typeof this.props.outlineColor == \"string\"\r\n            ? this.props.outlineColor\r\n            : this.props.outlineColor.create(this.context));\r\n      this.props.fillColor &&\r\n        (this.context.fillStyle =\r\n          typeof this.props.fillColor == \"string\"\r\n            ? this.props.fillColor\r\n            : this.props.fillColor.create(this.context));\r\n      this.props.outlineWidth &&\r\n        (this.context.lineWidth = this.props.outlineWidth);\r\n      this.props.shadowColor &&\r\n        (this.context.shadowColor = this.props.shadowColor);\r\n      this.props.shadowBlur &&\r\n        (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset\r\n            .transform(this.transform.worldTransform)\r\n            .subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n      this.props.font && (this.context.font = this.props.font);\r\n    }\r\n\r\n    // Rotate image using worldTransform's rotation component\r\n    this.context.translate(this.absolutePosition.x, this.absolutePosition.y);\r\n    this.context.scale(this.scale.x, this.scale.y);\r\n    this.context.rotate(\r\n      this.transform.worldTransform.getRotation() * (Math.PI / 180)\r\n    );\r\n    this.context.translate(-this.absolutePosition.x, -this.absolutePosition.y);\r\n\r\n    this.props.outline &&\r\n      this.context.strokeText(\r\n        this.text,\r\n        this.absolutePosition.x - this._originalWidth / 2,\r\n        this.absolutePosition.y + this._originalHeight / 2\r\n      );\r\n    (this.props.fill || !this.props.outline) &&\r\n      this.context.fillText(\r\n        this.text,\r\n        this.absolutePosition.x - this._originalWidth / 2,\r\n        this.absolutePosition.y + this._originalHeight / 2\r\n      );\r\n  }\r\n\r\n  _offRender(): void {\r\n    this.offContext.fillStyle = this.hitColor;\r\n\r\n    // Rotate image using worldTransform's rotation component\r\n    this.offContext.translate(this.absolutePosition.x, this.absolutePosition.y);\r\n    this.offContext.scale(this.scale.x, this.scale.y);\r\n    this.offContext.rotate(\r\n      this.transform.worldTransform.getRotation() * (Math.PI / 180)\r\n    );\r\n    this.offContext.translate(\r\n      -this.absolutePosition.x,\r\n      -this.absolutePosition.y\r\n    );\r\n\r\n    this.offContext.fillRect(\r\n      this.absolutePosition.x - this._originalWidth / 2,\r\n      this.absolutePosition.y - this._originalHeight / 2,\r\n      this._originalWidth,\r\n      this._originalHeight\r\n    );\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return new Vector2(\r\n      Vector2.Distance(\r\n        this.transform.controlPoints[0],\r\n        this.transform.controlPoints[1]\r\n      ),\r\n      0\r\n    );\r\n  }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(229);\n"],"names":["root","factory","exports","module","define","amd","self","Constant","Math","PI","Handle","element","width","height","drawingHandle","HTMLDivElement","this","canvasElement","document","createElement","clientWidth","clientHeight","appendChild","body","context","getContext","offCanvasElement","OffscreenCanvas","offContext","draw","drawing","window","cancelAnimationFrame","requestAnimationFrame","render","bind","Canvas","Random","floor","random","toString","rgbToHex","rgb","Color","_componentToHex","c","hex","length","debugPoint","key","point","props","frames","Debug","limitDebugCalls","debugCalls","push","debugFunction","_debugPoint","arguments","canvas","clone","center","fillStyle","color","beginPath","arc","x","y","radius","fill","debugLine","from","to","_debugLine","strokeStyle","lineWidth","moveTo","lineTo","stroke","show","debug","call","save","restore","shift","globalUpdate","rootNode","Empty","Vector2","Zero","renderTree","mousePos","colorToNode","_registerEvents","currentHitNode","prevHitNode","canvasOffset","currentDragNode","onmousemove","ev","getBoundingClientRect","clientX","left","clientY","top","_getHitNode","onmousedown","hitNode","onmouseup","onclick","oncontextmenu","preventDefault","position","getImageData","data","clearRect","transform","childs","forEach","child","updateWorldTransform","node","add","Node","parent","setContext","setDrawing","setHitColor","cNode","remove","nodeOrID","id","currentNode","queue","splice","indexOf","_debugSceneGraph","indent","console","log","order","Drawing","controlPoints","Transform","One","registeredEvents","zIndex","sort","a","b","newParent","map","absolutePosition","rotation","degrees","localRotation","scale","hitColor","on","eventKey","callback","_render","offRender","_offRender","method","args","dispose","max","Dimension","value","multiply","another","result","Matrix","Array","i","j","sum","k","multiplyInPlace","getRotation","atan2","Identity","Multiply","matrix1","matrix2","_position","_localRotation","_rotation","_scale","_parent","localTrasform","worldTransform","refControlPoints","relativeControlPoints","newPosition","newRotation","newScale","controlPoint","subtract","parentWorldTransform","cos","sin","TAU","applyTransform","index","toFixed","arg1","arg2","addInPlace","subtractInPlace","rotate","pivot","cosT","sinT","rotateInPlace","tmpX","tmpY","matrix","transformInPlace","Midpoint","vector1","vector2","Distance","sqrt","pow","Bounds","vectors","minVec","Number","MAX_VALUE","maxVec","MIN_VALUE","vector","Average","sumX","sumY","minXOrCanvas","maxX","minY","maxY","Lerp","start","end","amount","minor","major","outlineColor","fillColor","create","outlineWidth","outlineDashSegments","setLineDash","shadowColor","shadowBlur","shadowOffset","staticShadow","shadowOffsetX","shadowOffsetY","ellipse","outline","getDimension","Ellipse","source","_source","Image","src","crossOrigin","translate","topLeft","drawImage","fillRect","_from","_to","lineCap","lineDashSegments","Line","offset","colors","weights","gradient","delta","AUTO","createLinearGradient","addColorStop","LinearGradient","vertices","closePath","bounds","abs","Polygon","fromOffset","fromRadius","toOffset","toRadius","fromCenter","toCenter","createRadialGradient","RadialGradient","Rectangle","text","textMetricContext","font","_originalWidth","measureText","_originalHeight","_text","strokeText","fillText","Text","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__"],"sourceRoot":""}