!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define("Percept",[],o):"object"==typeof exports?exports.Percept=o():t.Percept=o()}(self,(()=>(()=>{"use strict";var t={379:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Constant=void 0,function(t){t[t.TAU=Math.PI/180]="TAU"}(o.Constant||(o.Constant={}))},712:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Handle=void 0,function(t){t[t.AUTO=-1]="AUTO"}(o.Handle||(o.Handle={}))},20:function(t,o,e){var i=this&&this.__createBinding||(Object.create?function(t,o,e,i){void 0===i&&(i=e);var n=Object.getOwnPropertyDescriptor(o,e);n&&!("get"in n?!o.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return o[e]}}),Object.defineProperty(t,i,n)}:function(t,o,e,i){void 0===i&&(i=e),t[i]=o[e]}),n=this&&this.__exportStar||function(t,o){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(o,e)||i(o,t,e)};Object.defineProperty(o,"__esModule",{value:!0}),n(e(712),o),n(e(379),o)},353:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Canvas=void 0;var e=function(){function t(t,o,e){this.frameId=0,t?t instanceof HTMLDivElement?(this.canvasElement=document.createElement("canvas"),o&&e?(this.canvasElement.width=o,this.canvasElement.height=e):(this.canvasElement.width=t.clientWidth,this.canvasElement.height=t.clientHeight),t.appendChild(this.canvasElement)):(this.canvasElement=t,o&&e&&(this.canvasElement.width=o,this.canvasElement.height=e)):(this.canvasElement=document.createElement("canvas"),this.canvasElement.width=document.body.clientWidth,this.canvasElement.height=document.body.clientHeight,document.body.appendChild(this.canvasElement)),this.width=this.canvasElement.width,this.height=this.canvasElement.height,this.context=this.canvasElement.getContext("2d"),"undefined"!=typeof OffscreenCanvas?(this.offCanvasElement=new OffscreenCanvas(this.width,this.height),this.offContext=this.offCanvasElement.getContext("2d")):(this.offCanvasElement=document.createElement("canvas"),this.offCanvasElement.width=this.width,this.offCanvasElement.height=this.height,this.offContext=this.offCanvasElement.getContext("2d"))}return t.prototype.draw=function(t){this.stop(),this.render(t)},t.prototype.stop=function(){window.cancelAnimationFrame(this.frameId)},t.prototype.render=function(t){t.render(),this.frameId<0||(this.frameId=window.requestAnimationFrame(this.render.bind(this,t)))},t}();o.Canvas=e},278:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Color=void 0;var e=function(){function t(){}return t.Random=function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},t.rgbToHex=function(o){return"#"+t._componentToHex(o[0])+t._componentToHex(o[1])+t._componentToHex(o[2])},t._componentToHex=function(t){var o=t.toString(16);return 1==o.length?"0"+o:o},t}();o.Color=e},992:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Debug=void 0;var e=function(){function t(){}return t.debugPoint=function(o,e,i,n,s){t.limitDebugCalls(e,o,s),e.debugCalls[o].push({debugFunction:t._debugPoint,arguments:[e.canvas.context,i.clone(),n]})},t._debugPoint=function(t,o,e){t.fillStyle=e.color,t.beginPath(),t.arc(o.x,o.y,e.radius?e.radius:2,0,2*Math.PI),t.fill()},t.debugLine=function(o,e,i,n,s,r){t.limitDebugCalls(e,o,r),e.debugCalls[o].push({debugFunction:t._debugLine,arguments:[e.canvas.context,i.clone(),n.clone(),s]})},t._debugLine=function(t,o,e,i){t.strokeStyle=i.color,t.lineWidth=i.width?i.width:1,t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(e.x,e.y),t.stroke(),t.fillStyle="green",t.beginPath(),t.arc(o.x,o.y,2,0,2*Math.PI),t.fill(),t.fillStyle="red",t.beginPath(),t.arc(e.x,e.y,2,0,2*Math.PI),t.fill()},t.show=function(t,o){for(var e in t)for(var i=0,n=t[e];i<n.length;i++){var s=n[i];o.save(),s.debugFunction.apply(s,s.arguments),o.restore()}},t.limitDebugCalls=function(t,o,e){e&&t.debugCalls[o]&&e-1<t.debugCalls[o].length?t.debugCalls[o].shift():(!t.debugCalls[o]||!e)&&(t.debugCalls[o]=[])},t}();o.Debug=e},799:(t,o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Drawing=void 0;var i=e(676),n=e(281),s=e(649),r=function(){function t(t,o){this.canvas=t,this.globalUpdate=o,this.pointers=[];var e=new s.Empty("#Root",n.Vector.Zero());e.context=this.canvas.context,e.drawing=this,this.sceneGraph=e,this.debugCalls={},this.colorToNode={},this._registerEvents()}return t.prototype.getRelativePosition=function(t){var o=this.canvas.canvasElement.getBoundingClientRect();return new n.Vector(t.clientX-o.left,t.clientY-o.top)},t.prototype.updatePointer=function(t,o){var e=this.pointers.find((function(o){return o.id===t.pointerId}));e&&(e.position=o)},t.prototype.removePointer=function(t){this.pointers.splice(this.pointers.findIndex((function(o){return o.id===t.pointerId})),1)},t.prototype._registerEvents=function(){var t,o,e=this;this.canvas.canvasElement.onpointerdown=function(o){e.pointers.push({id:o.pointerId,position:e.getRelativePosition(o)}),1===e.pointers.length?(t=e._getHitNode(e.pointers[0].position))&&t.call("down",[e.pointers[0].position.clone()]):t=null},this.canvas.canvasElement.onpointermove=function(i){var n=e.getRelativePosition(i);if(e.updatePointer(i,n),t&&t.call("drag",[n.clone()]),"mouse"===i.pointerType&&!t){var s=e._getHitNode(n);s!==o?(o&&o.call("exit",[n.clone()]),s&&s.call("enter",[n.clone()])):s&&!t&&s.call("over",[n.clone()]),o=s}},this.canvas.canvasElement.onpointerup=function(o){e.removePointer(o),t=null;var i=e.getRelativePosition(o),n=e._getHitNode(i);n&&n.call("up",[i.clone()])},this.canvas.canvasElement.onpointerout=function(i){if(e.removePointer(i),0===e.pointers.length&&(t=null),o){var n=e.getRelativePosition(i);o.call("exit",[n.clone()]),o=null}},this.canvas.canvasElement.onclick=function(t){var o=e.getRelativePosition(t),i=e._getHitNode(o);i&&i.call("click",[o.clone()])},this.canvas.canvasElement.oncontextmenu=function(t){t.preventDefault();var o=e._getHitNode(e.getRelativePosition(t));o&&o.call("rightclick")}},t.prototype._getHitNode=function(t){return this.colorToNode[i.Color.rgbToHex(this.canvas.offContext.getImageData(t.x,t.y,1,1).data)]},t.prototype.render=function(){this.canvas.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.offContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.sceneGraph.call("update"),this.globalUpdate&&this.globalUpdate(),this.sceneGraph.transform.childs.forEach((function(t){t.updateWorldTransform()})),this.sceneGraph.transform.childs.forEach((function(t){t.node.render()})),i.Debug.show(this.debugCalls,this.canvas.context)},t.prototype.add=function(t){var o=this;t instanceof i.Node?(t.parent=this.sceneGraph,t.setContext(this.canvas.context,this.canvas.offContext),t.setDrawing(this),t.setHitColor()):t.forEach((function(t){t.parent=o.sceneGraph,t.setContext(o.canvas.context,o.canvas.offContext),t.setDrawing(o),t.setHitColor()}))},t.prototype.remove=function(t){t instanceof i.Node&&(t=t.id);var o,e=[];for(e.push(this.sceneGraph);o=e.shift();)o.id==t?o.transform.parent.childs.splice(o.transform.parent.childs.indexOf(o.transform),1):o.transform.childs.forEach((function(t){e.push(t.node)}))},t.prototype._debugSceneGraph=function(t,o){var e=this;console.log(o+t.id+"["+t.order+"]"),t.transform.childs.forEach((function(t){e._debugSceneGraph(t.node," "+o)}))},t}();o.Drawing=r},494:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0})},676:function(t,o,e){var i=this&&this.__createBinding||(Object.create?function(t,o,e,i){void 0===i&&(i=e);var n=Object.getOwnPropertyDescriptor(o,e);n&&!("get"in n?!o.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return o[e]}}),Object.defineProperty(t,i,n)}:function(t,o,e,i){void 0===i&&(i=e),t[i]=o[e]}),n=this&&this.__exportStar||function(t,o){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(o,e)||i(o,t,e)};Object.defineProperty(o,"__esModule",{value:!0}),n(e(353),o),n(e(278),o),n(e(992),o),n(e(799),o),n(e(494),o),n(e(55),o)},55:function(t,o,e){var i=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,n=0,s=o.length;n<s;n++)!i&&n in o||(i||(i=Array.prototype.slice.call(o,0,n)),i[n]=o[n]);return t.concat(i||Array.prototype.slice.call(o))};Object.defineProperty(o,"__esModule",{value:!0}),o.Node=void 0;var n=e(81),s=e(278),r=function(){function t(t,o,e){this.id=t,this.transform=new n.Transform(o,0,0,n.Vector.Unit(),e,this),this.registeredEvents={},this.order=0}return Object.defineProperty(t.prototype,"zIndex",{get:function(){return this.order},set:function(t){this.order=t,this.parent&&this.parent.transform.childs.sort((function(t,o){return t.node.order-o.node.order}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.transform.parent.node},set:function(t){this.transform.parent=t.transform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childs",{get:function(){return this.transform.childs.map((function(t){return t.node}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"absolutePosition",{get:function(){return this.transform.absolutePosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localRotation",{get:function(){return this.transform.localRotation},set:function(t){this.transform.localRotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale=t},enumerable:!1,configurable:!0}),t.prototype.setHitColor=function(){for(var t=s.Color.Random();this.drawing.colorToNode[t];)t=s.Color.Random();this.hitColor=t,this.drawing.colorToNode[t]=this,this.transform.childs.forEach((function(t){t.node.setHitColor()}))},t.prototype.on=function(t,o){this.registeredEvents[t]=o},t.prototype.render=function(){this.context.save(),this._render(),this.context.restore(),this.offRender();for(var t=0,o=this.transform.childs;t<o.length;t++){o[t].node.render()}},t.prototype.offRender=function(){this.offContext.save(),this._offRender(),this.offContext.restore()},t.prototype.call=function(t,o){var e;this.registeredEvents[t]&&(o?(e=this.registeredEvents)[t].apply(e,i([this],o,!1)):this.registeredEvents[t](this));for(var n=0,s=this.transform.childs;n<s.length;n++){s[n].node.call(t,o)}},t.prototype.setContext=function(t,o){this.context=t,this.offContext=o,this.transform.childs.forEach((function(e){e.node.setContext(t,o)}))},t.prototype.setDrawing=function(t){this.drawing=t,this.transform.childs.forEach((function(o){o.node.setDrawing(t)}))},t.prototype.dispose=function(){this.drawing.remove(this.id)},t}();o.Node=r},182:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Dimension=void 0;var e=function(){function t(t,o){this.width=t,this.height=o}return t.prototype.max=function(){return Math.max(this.width,this.height)},t}();o.Dimension=e},81:function(t,o,e){var i=this&&this.__createBinding||(Object.create?function(t,o,e,i){void 0===i&&(i=e);var n=Object.getOwnPropertyDescriptor(o,e);n&&!("get"in n?!o.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return o[e]}}),Object.defineProperty(t,i,n)}:function(t,o,e,i){void 0===i&&(i=e),t[i]=o[e]}),n=this&&this.__exportStar||function(t,o){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(o,e)||i(o,t,e)};Object.defineProperty(o,"__esModule",{value:!0}),n(e(182),o),n(e(356),o),n(e(796),o),n(e(281),o)},356:function(t,o){var e=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,n=0,s=o.length;n<s;n++)!i&&n in o||(i||(i=Array.prototype.slice.call(o,0,n)),i[n]=o[n]);return t.concat(i||Array.prototype.slice.call(o))};Object.defineProperty(o,"__esModule",{value:!0}),o.Matrix=void 0;var i=function(){function t(t){this.value=t}return t.prototype._multiply=function(o){var i;if(o instanceof t){i=e([],Array(this.value.length),!0).map((function(){return Array(o.value[0].length)}));for(var n=0;n<this.value.length;n++)for(var s=0;s<o.value[0].length;s++){for(var r=0,a=0;a<this.value[0].length;a++)r+=this.value[n][a]*o.value[a][s];i[n][s]=r}}else{i=e([],Array(this.value.length),!0).map((function(){return Array(o[0].length)}));for(n=0;n<this.value.length;n++)for(s=0;s<o[0].length;s++){for(r=0,a=0;a<this.value[0].length;a++)r+=this.value[n][a]*o[a][s];i[n][s]=r}}return i},t.prototype.multiply=function(o){return new t(this._multiply(o))},t.prototype.multiplyInPlace=function(t){return this.value=this._multiply(t),this},t.prototype.clone=function(){return new t([[this.value[0][0],this.value[0][1],this.value[0][2]],[this.value[1][0],this.value[1][1],this.value[1][2]],[this.value[2][0],this.value[2][1],this.value[2][2]]])},t.prototype.getRotation=function(){return Math.atan2(this.value[0][1],this.value[0][0])*(180/Math.PI)},t.Identity=function(){return new t([[1,0,0],[0,1,0],[0,0,1]])},t.Zero=function(){return new t([[0,0,0],[0,0,0],[0,0,0]])},t.Multiply=function(t,o){for(var i=e([],Array(t.length),!0).map((function(){return Array(o[0].length)})),n=0;n<t.length;n++)for(var s=0;s<o[0].length;s++){for(var r=0,a=0;a<t[0].length;a++)r+=t[n][a]*o[a][s];i[n][s]=r}return i},t}();o.Matrix=i},796:function(t,o,e){var i=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,n=0,s=o.length;n<s;n++)!i&&n in o||(i||(i=Array.prototype.slice.call(o,0,n)),i[n]=o[n]);return t.concat(i||Array.prototype.slice.call(o))};Object.defineProperty(o,"__esModule",{value:!0}),o.Transform=void 0;var n=e(81),s=e(379),r=function(){function t(t,o,e,s,r,a){this.node=a,this._position=t,this._localRotation=o,this._rotation=e,this._scale=s,this._parent=null,this.childs=[],this.localTrasform=n.Matrix.Identity(),this.worldTransform=n.Matrix.Identity(),this.refControlPoints=this.relativeControlPoints(r),this.controlPoints=i([],r,!0)}return Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){if(this._parent){var o=this._parent.childs.indexOf(this);o>-1&&this._parent.childs.splice(o,1)}t&&t.childs.push(this),this._parent=t,this._parent&&this._parent.childs.sort((function(t,o){return t.node.order-o.node.order}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"absolutePosition",{get:function(){return n.Vector.Zero().transform(this.worldTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t%360},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localRotation",{get:function(){return this._localRotation},set:function(t){this._localRotation=t%360},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t},enumerable:!1,configurable:!0}),t.prototype.relativeControlPoints=function(t){var o=this,e=[];return t.forEach((function(t){e.push(t.subtract(o.position))})),e},t.prototype.applyTransform=function(){var t=this;this.refControlPoints.forEach((function(o,e){t.controlPoints[e]=o.transform(t.worldTransform)}))},t.prototype._updateWorldTransform=function(t){var o,e,i=this;this.localTrasform.value=[[1,0,0],[0,1,0],[this.position.x,this.position.y,1]],"#Root"!=this.parent.node.id&&(o=Math.cos(this.rotation*s.Constant.TAU),e=Math.sin(this.rotation*s.Constant.TAU),this.localTrasform=new n.Matrix([[1,0,0],[0,1,0],[this.position.x,this.position.y,1]]).multiply([[o,e,0],[-e,o,0],[0,0,1]]).multiply([[1,0,0],[0,1,0],[-this.position.x,-this.position.y,1]]).multiply(this.localTrasform)),o=Math.cos(this.localRotation*s.Constant.TAU),e=Math.sin(this.localRotation*s.Constant.TAU),this.localTrasform=new n.Matrix([[o,e,0],[-e,o,0],[0,0,1]]).multiply(this.localTrasform),this.localTrasform=new n.Matrix([[this.scale.x,0,0],[0,this.scale.y,0],[0,0,1]]).multiply(this.localTrasform),this.worldTransform=t?this.localTrasform.multiply(t):this.localTrasform.clone(),this.childs.forEach((function(t){t.updateWorldTransform(i.worldTransform)})),this.applyTransform()},t.prototype.updateWorldTransform=function(t){this._updateWorldTransform(t)},t}();o.Transform=r},281:(t,o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Vector=void 0;var i=e(353),n=e(379),s=e(356),r=function(){function t(t,o){this.x=t,this.y=o}return t.prototype.toString=function(){return"["+this.x.toFixed(3)+", "+this.y.toFixed(3)+"]"},t.prototype.add=function(o,e){return o instanceof t?new t(this.x+o.x,this.y+o.y):new t(this.x+o,void 0===e?this.y+o:this.y+e)},t.prototype.addInPlace=function(o,e){return o instanceof t?(this.x+=o.x,this.y+=o.y):void 0===e?(this.x+=o,this.y+=o):(this.x+=o,this.y+=e),this},t.prototype.multiply=function(o,e){return o instanceof t?new t(this.x*o.x,this.y*o.y):new t(this.x*o,void 0===e?this.y*o:this.y*e)},t.prototype.multiplyInPlace=function(o,e){return o instanceof t?(this.x*=o.x,this.y*=o.y):void 0===e?(this.x*=o,this.y*=o):(this.x*=o,this.y*=e),this},t.prototype.subtract=function(o,e){return o instanceof t?new t(this.x-o.x,this.y-o.y):new t(this.x-o,void 0===e?this.y-o:this.y-e)},t.prototype.subtractInPlace=function(o,e){return o instanceof t?(this.x-=o.x,this.y-=o.y):void 0===e?(this.x-=o,this.y-=o):(this.x-=o,this.y-=e),this},t.prototype.rotate=function(o,e){e*=n.Constant.TAU;var i=Math.cos(e),s=Math.sin(e);return new t(i*(this.x-o.x)-s*(this.y-o.y)+o.x,s*(this.x-o.x)+i*(this.y-o.y)+o.y)},t.prototype.rotateInPlace=function(t,o){o*=n.Constant.TAU;var e=Math.cos(o),i=Math.sin(o);return this.tmpX=e*(this.x-t.x)-i*(this.y-t.y)+t.x,this.tmpY=i*(this.x-t.x)+e*(this.y-t.y)+t.y,this.x=this.tmpX,this.y=this.tmpY,this},t.prototype.transform=function(o){var e=s.Matrix.Multiply([[this.x,this.y,1]],o.value);return new t(e[0][0],e[0][1])},t.prototype.transformInPlace=function(t){var o=s.Matrix.Multiply([[this.x,this.y,1]],t.value);return this.x=o[0][0],this.y=o[0][1],this},t.prototype.max=function(){return Math.max(this.x,this.y)},t.Midpoint=function(o,e){return new t((o.x+e.x)/2,(o.y+e.y)/2)},t.Distance=function(t,o){return Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2))},t.Zero=function(){return new t(0,0)},t.Unit=function(){return new t(1,1)},t.Bounds=function(o){var e=new t(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),i=new t(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);return o.forEach((function(t){t.x<e.x&&(e.x=t.x),t.y<e.y&&(e.y=t.y),t.x>i.x&&(i.x=t.x),t.y>i.y&&(i.y=t.y)})),[e,i]},t.Average=function(o){var e=0,i=0;return o.forEach((function(t){e+=t.x,i+=t.y})),new t(e/o.length,i/o.length)},t.Random=function(o,e,n,s){return o instanceof i.Canvas?new t(Math.random()*o.width,Math.random()*o.height):new t(Math.random()*(e-o)+o,Math.random()*(s-n)+n)},t.Lerp=function(o,e,i){return new t(o.x+(e.x-o.x)*i,o.y+(e.y-o.y)*i)},t.prototype.clone=function(){return new t(this.x,this.y)},t}();o.Vector=r},229:function(t,o,e){var i=this&&this.__createBinding||(Object.create?function(t,o,e,i){void 0===i&&(i=e);var n=Object.getOwnPropertyDescriptor(o,e);n&&!("get"in n?!o.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return o[e]}}),Object.defineProperty(t,i,n)}:function(t,o,e,i){void 0===i&&(i=e),t[i]=o[e]}),n=this&&this.__exportStar||function(t,o){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(o,e)||i(o,t,e)};Object.defineProperty(o,"__esModule",{value:!0}),o.View=void 0,n(e(20),o),o.View=e(132),n(e(676),o),n(e(81),o)},579:function(t,o,e){var i,n=this&&this.__extends||(i=function(t,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},i(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});Object.defineProperty(o,"__esModule",{value:!0}),o.Ellipse=void 0;var s=e(281),r=function(t){function o(o,e,i,n,s){void 0===s&&(s={});var r=t.call(this,o,e,[e.subtract(0,i),e.add(n,0),e.add(0,i),e.subtract(n,0)])||this;return r.minor=i,r.major=n,r.props=s,r.props.outlineColor&&"string"!=typeof r.props.outlineColor&&(r.props.outlineColor.node=r),r.props.fillColor&&"string"!=typeof r.props.fillColor&&(r.props.fillColor.node=r),r}return n(o,t),o.prototype._render=function(){if(this.props&&(this.props.outlineColor&&(this.context.strokeStyle="string"==typeof this.props.outlineColor?this.props.outlineColor:this.props.outlineColor.create(this.context)),this.props.fillColor&&(this.context.fillStyle="string"==typeof this.props.fillColor?this.props.fillColor:this.props.fillColor.create(this.context)),this.props.outlineWidth&&(this.context.lineWidth=this.props.outlineWidth),this.props.outlineDashSegments&&this.context.setLineDash(this.props.outlineDashSegments),this.props.shadowColor&&(this.context.shadowColor=this.props.shadowColor),this.props.shadowBlur&&(this.context.shadowBlur=this.props.shadowBlur),this.props.shadowOffset))if(this.props.staticShadow)this.context.shadowOffsetX=this.props.shadowOffset.x,this.context.shadowOffsetY=this.props.shadowOffset.y;else{var t=this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);this.context.shadowOffsetX=t.x,this.context.shadowOffsetY=t.y}var o=this.absolutePosition;this.context.beginPath(),this.minor==this.major?this.context.arc(o.x,o.y,this.minor,0,2*Math.PI):this.context.ellipse(o.x,o.y,this.major,this.minor,Math.atan2(this.transform.controlPoints[1].y-o.y,this.transform.controlPoints[1].x-o.x),0,2*Math.PI),this.props.fill&&this.context.fill(),!this.props.outline&&this.props.fill||this.context.stroke()},o.prototype._offRender=function(){this.props.outlineWidth&&(this.offContext.lineWidth=this.props.outlineWidth),this.offContext.strokeStyle=this.hitColor,this.offContext.fillStyle=this.hitColor;var t=this.absolutePosition;this.offContext.beginPath(),this.minor==this.major?this.offContext.arc(t.x,t.y,this.minor,0,2*Math.PI):this.offContext.ellipse(t.x,t.y,this.major,this.minor,Math.atan2(this.transform.controlPoints[1].y-t.y,this.transform.controlPoints[1].x-t.x),0,2*Math.PI),this.props.fill&&this.offContext.fill(),!this.props.outline&&this.props.fill||this.offContext.stroke()},o.prototype.getDimension=function(){return new s.Vector(s.Vector.Distance(this.transform.controlPoints[1],this.transform.controlPoints[3]),s.Vector.Distance(this.transform.controlPoints[0],this.transform.controlPoints[2]))},o}(e(55).Node);o.Ellipse=r},649:function(t,o,e){var i,n=this&&this.__extends||(i=function(t,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},i(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});Object.defineProperty(o,"__esModule",{value:!0}),o.Empty=void 0;var s=e(281),r=function(t){function o(o,e){return t.call(this,o,e,[])||this}return n(o,t),o.prototype._render=function(){},o.prototype._offRender=function(){},o.prototype.getDimension=function(){return s.Vector.Zero()},o}(e(55).Node);o.Empty=r},234:function(t,o,e){var i,n=this&&this.__extends||(i=function(t,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},i(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});Object.defineProperty(o,"__esModule",{value:!0}),o.Image=void 0;var s=e(281),r=function(t){function o(o,e,i,n,s,r){void 0===r&&(r={});var a=t.call(this,o,e,[])||this;return a.width=n,a.height=s,a.props=r,"string"==typeof i?(a._source=new window.Image,a._source.src=i):a._source=i,a._source.crossOrigin="Anonymous",a}return n(o,t),o.prototype._render=function(){if(this.props&&(this.props.shadowColor&&(this.context.shadowColor=this.props.shadowColor),this.props.shadowBlur&&(this.context.shadowBlur=this.props.shadowBlur),this.props.shadowOffset))if(this.props.staticShadow)this.context.shadowOffsetX=this.props.shadowOffset.x,this.context.shadowOffsetY=this.props.shadowOffset.y;else{var t=this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);this.context.shadowOffsetX=t.x,this.context.shadowOffsetY=t.y}this.context.translate(this.absolutePosition.x,this.absolutePosition.y),this.context.rotate(this.transform.worldTransform.getRotation()*(Math.PI/180)),this.context.translate(-this.absolutePosition.x,-this.absolutePosition.y);var o=this.absolutePosition.subtract(this.width*this.transform.scale.x/2,this.height*this.transform.scale.y/2);this.context.drawImage(this._source,o.x,o.y,this.width*this.transform.scale.x,this.height*this.transform.scale.y)},o.prototype._offRender=function(){this.offContext.fillStyle=this.hitColor,this.offContext.translate(this.absolutePosition.x,this.absolutePosition.y),this.offContext.rotate(this.transform.worldTransform.getRotation()*(Math.PI/180)),this.offContext.translate(-this.absolutePosition.x,-this.absolutePosition.y);var t=this.absolutePosition.subtract(this.width*this.transform.scale.x/2,this.height*this.transform.scale.y/2);this.offContext.fillRect(t.x,t.y,this.width*this.transform.scale.x,this.height*this.transform.scale.y)},o.prototype.getDimension=function(){return new s.Vector(this.width,this.height)},o}(e(55).Node);o.Image=r},132:function(t,o,e){var i=this&&this.__createBinding||(Object.create?function(t,o,e,i){void 0===i&&(i=e);var n=Object.getOwnPropertyDescriptor(o,e);n&&!("get"in n?!o.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return o[e]}}),Object.defineProperty(t,i,n)}:function(t,o,e,i){void 0===i&&(i=e),t[i]=o[e]}),n=this&&this.__exportStar||function(t,o){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(o,e)||i(o,t,e)};Object.defineProperty(o,"__esModule",{value:!0}),n(e(579),o),n(e(649),o),n(e(234),o),n(e(920),o),n(e(856),o),n(e(966),o),n(e(879),o),n(e(167),o),n(e(895),o)},920:function(t,o,e){var i,n=this&&this.__extends||(i=function(t,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},i(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});Object.defineProperty(o,"__esModule",{value:!0}),o.Line=void 0;var s=e(281),r=e(55),a=function(t){function o(o,e,i,n,r){void 0===r&&(r={});var a=t.call(this,o,e instanceof s.Vector&&i instanceof s.Vector?n?e.add((i.x-e.x)*n,(i.y-e.y)*n):e.clone():s.Vector.Zero(),e instanceof s.Vector&&i instanceof s.Vector?[e,i]:[])||this;return a._from=e,a._to=i,a.props=r,a.props.color&&"string"!=typeof a.props.color&&(a.props.color.node=a),a}return n(o,t),Object.defineProperty(o.prototype,"from",{get:function(){return this._from instanceof r.Node?this._from.absolutePosition:this.transform.controlPoints[0]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"to",{get:function(){return this._to instanceof r.Node?this._to.absolutePosition:this.transform.controlPoints[1]},enumerable:!1,configurable:!0}),o.prototype._render=function(){if(this.props&&(this.props.color&&(this.context.strokeStyle="string"==typeof this.props.color?this.props.color:this.props.color.create(this.context)),this.props.lineWidth&&(this.context.lineWidth=this.props.lineWidth),this.props.lineCap&&(this.context.lineCap=this.props.lineCap),this.props.lineDashSegments&&this.context.setLineDash(this.props.lineDashSegments),this.props.shadowColor&&(this.context.shadowColor=this.props.shadowColor),this.props.shadowBlur&&(this.context.shadowBlur=this.props.shadowBlur),this.props.shadowOffset))if(this.props.staticShadow)this.context.shadowOffsetX=this.props.shadowOffset.x,this.context.shadowOffsetY=this.props.shadowOffset.y;else{var t=this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);this.context.shadowOffsetX=t.x,this.context.shadowOffsetY=t.y}this.context.beginPath(),this.context.moveTo(this.from.x,this.from.y),this.context.lineTo(this.to.x,this.to.y),this.context.stroke()},o.prototype._offRender=function(){this.props.lineWidth&&(this.offContext.lineWidth=this.props.lineWidth),this.offContext.strokeStyle=this.hitColor,this.offContext.beginPath(),this.offContext.moveTo(this.from.x,this.from.y),this.offContext.lineTo(this.to.x,this.to.y),this.offContext.stroke()},o.prototype.getDimension=function(){return new s.Vector(s.Vector.Distance(this.transform.controlPoints[0],this.transform.controlPoints[1]),0)},o}(r.Node);o.Line=a},167:(t,o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinearGradient=void 0;var i=e(20),n=e(281),s=function(){function t(t,o,e,i,n){this.offset=t,this.degrees=o,this.length=e,this.colors=i,this.weights=n}return t.prototype.create=function(t){var o,e,s,r,a=this,h=new n.Vector(0,0);return r=this.length==i.Handle.AUTO?this.node.getDimension().max():this.length,h.x=r/2*Math.cos(this.degrees*i.Constant.TAU),h.y=r/2*Math.sin(this.degrees*i.Constant.TAU),e=this.offset.subtract(h).transform(this.node.transform.worldTransform),s=this.offset.add(h).transform(this.node.transform.worldTransform),o=t.createLinearGradient(e.x,e.y,s.x,s.y),this.colors.forEach((function(t,e){o.addColorStop(a.weights[e],t)})),o},t}();o.LinearGradient=s},856:function(t,o,e){var i,n=this&&this.__extends||(i=function(t,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},i(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});Object.defineProperty(o,"__esModule",{value:!0}),o.Polygon=void 0;var s=e(281),r=function(t){function o(o,e,i,n){void 0===n&&(n={});var r=t.call(this,o,i instanceof s.Vector?i:s.Vector.Average(e),e)||this;return r.props=n,r.props.outlineColor&&"string"!=typeof r.props.outlineColor&&(r.props.outlineColor.node=r),r.props.fillColor&&"string"!=typeof r.props.fillColor&&(r.props.fillColor.node=r),r}return n(o,t),o.prototype._render=function(){if(this.props&&(this.props.outlineColor&&(this.context.strokeStyle="string"==typeof this.props.outlineColor?this.props.outlineColor:this.props.outlineColor.create(this.context)),this.props.fillColor&&(this.context.fillStyle="string"==typeof this.props.fillColor?this.props.fillColor:this.props.fillColor.create(this.context)),this.props.outlineWidth&&(this.context.lineWidth=this.props.outlineWidth),this.props.outlineDashSegments&&this.context.setLineDash(this.props.outlineDashSegments),this.props.shadowColor&&(this.context.shadowColor=this.props.shadowColor),this.props.shadowBlur&&(this.context.shadowBlur=this.props.shadowBlur),this.props.shadowOffset))if(this.props.staticShadow)this.context.shadowOffsetX=this.props.shadowOffset.x,this.context.shadowOffsetY=this.props.shadowOffset.y;else{var t=this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);this.context.shadowOffsetX=t.x,this.context.shadowOffsetY=t.y}this.context.beginPath(),this.context.moveTo(this.transform.controlPoints[0].x,this.transform.controlPoints[0].y);for(var o=1;o<this.transform.controlPoints.length;o++)this.context.lineTo(this.transform.controlPoints[o].x,this.transform.controlPoints[o].y);this.context.closePath(),this.props.fill&&this.context.fill(),!this.props.outline&&this.props.fill||this.context.stroke()},o.prototype._offRender=function(){this.props.outlineWidth&&(this.offContext.lineWidth=this.props.outlineWidth),this.offContext.strokeStyle=this.hitColor,this.offContext.fillStyle=this.hitColor,this.offContext.beginPath(),this.offContext.moveTo(this.transform.controlPoints[0].x,this.transform.controlPoints[0].y);for(var t=1;t<this.transform.controlPoints.length;t++)this.offContext.lineTo(this.transform.controlPoints[t].x,this.transform.controlPoints[t].y);this.offContext.closePath(),this.props.fill&&this.offContext.fill(),!this.props.outline&&this.props.fill||this.offContext.stroke()},o.prototype.getDimension=function(){var t=s.Vector.Bounds(this.transform.controlPoints);return new s.Vector(Math.abs(t[0].x-t[1].x),Math.abs(t[0].y-t[1].y))},o}(e(55).Node);o.Polygon=r},895:(t,o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RadialGradient=void 0;var i=e(712),n=function(){function t(t,o,e,i,n,s){this.fromOffset=t,this.fromRadius=o,this.toOffset=e,this.toRadius=i,this.colors=n,this.weights=s}return t.prototype.create=function(t){var o,e,n,s=this,r=this.fromOffset.transform(this.node.transform.worldTransform),a=this.toOffset.transform(this.node.transform.worldTransform);return this.fromRadius==i.Handle.AUTO||this.toRadius==i.Handle.AUTO?(e=1,n=this.node.getDimension().max()/2):(e=this.fromRadius,n=this.toRadius),o=t.createRadialGradient(r.x,r.y,e,a.x,a.y,n),this.colors.forEach((function(t,e){o.addColorStop(s.weights[e],t)})),o},t}();o.RadialGradient=n},966:function(t,o,e){var i,n=this&&this.__extends||(i=function(t,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},i(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});Object.defineProperty(o,"__esModule",{value:!0}),o.Rectangle=void 0;var s=e(281),r=function(t){function o(o,e,i,n,s){void 0===s&&(s={});var r=t.call(this,o,e,[e.add(-i/2,-n/2),e.add(i/2,-n/2),e.add(i/2,n/2),e.add(-i/2,n/2)])||this;return r.props=s,r.props.outlineColor&&"string"!=typeof r.props.outlineColor&&(r.props.outlineColor.node=r),r.props.fillColor&&"string"!=typeof r.props.fillColor&&(r.props.fillColor.node=r),r}return n(o,t),o.prototype._render=function(){if(this.props&&(this.props.outlineColor&&(this.context.strokeStyle="string"==typeof this.props.outlineColor?this.props.outlineColor:this.props.outlineColor.create(this.context)),this.props.fillColor&&(this.context.fillStyle="string"==typeof this.props.fillColor?this.props.fillColor:this.props.fillColor.create(this.context)),this.props.outlineWidth&&(this.context.lineWidth=this.props.outlineWidth),this.props.outlineDashSegments&&this.context.setLineDash(this.props.outlineDashSegments),this.props.shadowColor&&(this.context.shadowColor=this.props.shadowColor),this.props.shadowBlur&&(this.context.shadowBlur=this.props.shadowBlur),this.props.shadowOffset))if(this.props.staticShadow)this.context.shadowOffsetX=this.props.shadowOffset.x,this.context.shadowOffsetY=this.props.shadowOffset.y;else{var t=this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);this.context.shadowOffsetX=t.x,this.context.shadowOffsetY=t.y}this.context.beginPath(),this.context.moveTo(this.transform.controlPoints[0].x,this.transform.controlPoints[0].y),this.context.lineTo(this.transform.controlPoints[1].x,this.transform.controlPoints[1].y),this.context.lineTo(this.transform.controlPoints[2].x,this.transform.controlPoints[2].y),this.context.lineTo(this.transform.controlPoints[3].x,this.transform.controlPoints[3].y),this.context.lineTo(this.transform.controlPoints[0].x,this.transform.controlPoints[0].y),this.props.fill&&this.context.fill(),!this.props.outline&&this.props.fill||this.context.stroke()},o.prototype._offRender=function(){this.props.outlineWidth&&(this.offContext.lineWidth=this.props.outlineWidth),this.offContext.strokeStyle=this.hitColor,this.offContext.fillStyle=this.hitColor,this.offContext.beginPath(),this.offContext.moveTo(this.transform.controlPoints[0].x,this.transform.controlPoints[0].y),this.offContext.lineTo(this.transform.controlPoints[1].x,this.transform.controlPoints[1].y),this.offContext.lineTo(this.transform.controlPoints[2].x,this.transform.controlPoints[2].y),this.offContext.lineTo(this.transform.controlPoints[3].x,this.transform.controlPoints[3].y),this.offContext.lineTo(this.transform.controlPoints[0].x,this.transform.controlPoints[0].y),this.props.fill&&this.offContext.fill(),!this.props.outline&&this.props.fill||this.offContext.stroke()},o.prototype.getDimension=function(){return new s.Vector(s.Vector.Distance(this.transform.controlPoints[0],this.transform.controlPoints[1]),s.Vector.Distance(this.transform.controlPoints[1],this.transform.controlPoints[2]))},o}(e(55).Node);o.Rectangle=r},879:function(t,o,e){var i,n=this&&this.__extends||(i=function(t,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},i(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});Object.defineProperty(o,"__esModule",{value:!0}),o.Text=void 0;var s=e(281),r=function(t){function o(o,e,i,n){void 0===n&&(n={});var s=t.call(this,o,e,[])||this;s.props=n,s.text=i,s.props.outlineColor&&"string"!=typeof s.props.outlineColor&&(s.props.outlineColor.node=s),s.props.fillColor&&"string"!=typeof s.props.fillColor&&(s.props.fillColor.node=s);var r=document.createElement("canvas").getContext("2d");return s.props.font&&(r.font=s.props.font),s._originalWidth=r.measureText(i).width,s._originalHeight=r.measureText("M").width,s}return n(o,t),Object.defineProperty(o.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!1,configurable:!0}),o.prototype._render=function(){if(this.props){if(this.props.outlineColor&&(this.context.strokeStyle="string"==typeof this.props.outlineColor?this.props.outlineColor:this.props.outlineColor.create(this.context)),this.props.fillColor&&(this.context.fillStyle="string"==typeof this.props.fillColor?this.props.fillColor:this.props.fillColor.create(this.context)),this.props.outlineWidth&&(this.context.lineWidth=this.props.outlineWidth),this.props.shadowColor&&(this.context.shadowColor=this.props.shadowColor),this.props.shadowBlur&&(this.context.shadowBlur=this.props.shadowBlur),this.props.shadowOffset)if(this.props.staticShadow)this.context.shadowOffsetX=this.props.shadowOffset.x,this.context.shadowOffsetY=this.props.shadowOffset.y;else{var t=this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);this.context.shadowOffsetX=t.x,this.context.shadowOffsetY=t.y}this.props.font&&(this.context.font=this.props.font)}this.context.translate(this.absolutePosition.x,this.absolutePosition.y),this.context.scale(this.scale.x,this.scale.y),this.context.rotate(this.transform.worldTransform.getRotation()*(Math.PI/180)),this.context.translate(-this.absolutePosition.x,-this.absolutePosition.y),this.props.outline&&this.context.strokeText(this.text,this.absolutePosition.x-this._originalWidth/2,this.absolutePosition.y+this._originalHeight/2),(this.props.fill||!this.props.outline)&&this.context.fillText(this.text,this.absolutePosition.x-this._originalWidth/2,this.absolutePosition.y+this._originalHeight/2)},o.prototype._offRender=function(){this.offContext.fillStyle=this.hitColor,this.offContext.translate(this.absolutePosition.x,this.absolutePosition.y),this.offContext.scale(this.scale.x,this.scale.y),this.offContext.rotate(this.transform.worldTransform.getRotation()*(Math.PI/180)),this.offContext.translate(-this.absolutePosition.x,-this.absolutePosition.y),this.offContext.fillRect(this.absolutePosition.x-this._originalWidth/2,this.absolutePosition.y-this._originalHeight/2,this._originalWidth,this._originalHeight)},o.prototype.getDimension=function(){return new s.Vector(this._originalWidth,this._originalHeight)},o}(e(55).Node);o.Text=r}},o={};var e=function e(i){var n=o[i];if(void 0!==n)return n.exports;var s=o[i]={exports:{}};return t[i].call(s.exports,s,s.exports,e),s.exports}(229);return e})()));
//# sourceMappingURL=percept.js.map