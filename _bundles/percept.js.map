{"version":3,"sources":["webpack://Percept/webpack/universalModuleDefinition","webpack://Percept/./src/Math/constants.ts","webpack://Percept/./src/Math/dimension.ts","webpack://Percept/./src/Math/math.ts","webpack://Percept/./src/Math/matrix.ts","webpack://Percept/./src/Math/transform.ts","webpack://Percept/./src/Math/vector.ts","webpack://Percept/./src/View/ellipse.ts","webpack://Percept/./src/View/empty.ts","webpack://Percept/./src/View/image.ts","webpack://Percept/./src/View/line.ts","webpack://Percept/./src/View/polygon.ts","webpack://Percept/./src/View/rectangle.ts","webpack://Percept/./src/View/text.ts","webpack://Percept/./src/View/view.ts","webpack://Percept/./src/canvas.ts","webpack://Percept/./src/color.ts","webpack://Percept/./src/debug.ts","webpack://Percept/./src/drawing.ts","webpack://Percept/./src/enums.ts","webpack://Percept/./src/node.ts","webpack://Percept/./src/percept.ts","webpack://Percept/webpack/bootstrap","webpack://Percept/webpack/startup"],"names":[],"mappings":"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","file":"percept.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Percept\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Percept\"] = factory();\n\telse\n\t\troot[\"Percept\"] = factory();\n})(self, function() {\nreturn ","/**@hidden */\r\n\r\nexport enum Constant {\r\n  TAU = (Math.PI / 180)\r\n}\r\n","/**@hidden */\r\n\r\nexport class Dimension {\r\n  constructor(public width: number, public height: number) { }\r\n\r\n  max() {\r\n    return Math.max(this.width, this.height);\r\n  }\r\n}\r\n","export * from './constants';\r\nexport * from './dimension';\r\nexport * from './matrix';\r\nexport * from './transform';\r\nexport * from './vector';\r\n","/**\r\n * A 3x3 Matrix\r\n */\r\nexport class Matrix {\r\n  value: number[][];\r\n\r\n  constructor(value: number[][]) {\r\n    this.value = value;\r\n  }\r\n\r\n  multiply(another: Matrix | number[][]): Matrix {\r\n    let result;\r\n    if (another instanceof Matrix) {\r\n      result = [...Array(this.value.length)].map(x => Array(another.value[0].length));\r\n\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        for (let j = 0; j < another.value[0].length; j++) {\r\n          let sum = 0;\r\n          for (let k = 0; k < this.value[0].length; k++) {\r\n            sum += this.value[i][k] * another.value[k][j];\r\n          }\r\n          result[i][j] = sum;\r\n        }\r\n      }\r\n    } else {\r\n      result = [...Array(this.value.length)].map(x => Array(another[0].length));\r\n\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        for (let j = 0; j < another[0].length; j++) {\r\n          let sum = 0;\r\n          for (let k = 0; k < this.value[0].length; k++) {\r\n            sum += this.value[i][k] * another[k][j];\r\n          }\r\n          result[i][j] = sum;\r\n        }\r\n      }\r\n    }\r\n\r\n    return new Matrix(result);\r\n  }\r\n\r\n  multiplyInPlace(another: Matrix | number[][]): Matrix {\r\n    let result;\r\n    if (another instanceof Matrix) {\r\n      result = [...Array(this.value.length)].map(x => Array(another.value[0].length));\r\n\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        for (let j = 0; j < another.value[0].length; j++) {\r\n          let sum = 0;\r\n          for (let k = 0; k < this.value[0].length; k++) {\r\n            sum += this.value[i][k] * another.value[k][j];\r\n          }\r\n          result[i][j] = sum;\r\n        }\r\n      }\r\n    } else {\r\n      result = [...Array(this.value.length)].map(x => Array(another[0].length));\r\n\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        for (let j = 0; j < another[0].length; j++) {\r\n          let sum = 0;\r\n          for (let k = 0; k < this.value[0].length; k++) {\r\n            sum += this.value[i][k] * another[k][j];\r\n          }\r\n          result[i][j] = sum;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.value = result;\r\n    return this;\r\n  }\r\n\r\n  clone() {\r\n    return new Matrix([\r\n      [this.value[0][0], this.value[0][1], this.value[0][2]],\r\n      [this.value[1][0], this.value[1][1], this.value[1][2]],\r\n      [this.value[2][0], this.value[2][1], this.value[2][2]]\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * Decomposes the rotation component from matrix to get absolute rotation for a child transform\r\n   */\r\n  getRotation(): number {\r\n    return Math.atan2(this.value[0][1], this.value[0][0]) * (180 / Math.PI);\r\n  }\r\n\r\n  static Identity() {\r\n    return new Matrix([[1, 0, 0], [0, 1, 0], [0, 0, 1]]);\r\n  }\r\n\r\n  static Zero() {\r\n    return new Matrix([[0, 0, 0], [0, 0, 0], [0, 0, 0]]);\r\n  }\r\n\r\n  static Multiply(matrix1: number[][], matrix2: number[][]) {\r\n    let result = [...Array(matrix1.length)].map(x => Array(matrix2[0].length));\r\n\r\n    for (let i = 0; i < matrix1.length; i++) {\r\n      for (let j = 0; j < matrix2[0].length; j++) {\r\n        let sum = 0;\r\n        for (let k = 0; k < matrix1[0].length; k++) {\r\n          sum += matrix1[i][k] * matrix2[k][j];\r\n        }\r\n        result[i][j] = sum;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n","/**@hidden */\r\n\r\nimport { Constant } from './math';\r\nimport { Matrix } from \"./math\";\r\nimport { Vector2 } from \"./math\";\r\nimport { Node } from '../node';\r\n\r\n// Stores a node's transform (position, rotation, scale)\r\nexport class Transform {\r\n\r\n  // reference control points to apply transform to\r\n  refControlPoints: Vector2[];\r\n  // transformed control points\r\n  controlPoints: Vector2[];\r\n  localTrasform: Matrix;\r\n  worldTransform: Matrix;\r\n  _parent: Transform;\r\n  childs: Transform[];\r\n\r\n  get parent(): Transform {\r\n    return this._parent;\r\n  }\r\n  set parent(newParent: Transform) {\r\n    if (this._parent) {\r\n      (this._parent.childs.indexOf(this)) && (this._parent.childs.splice(this._parent.childs.indexOf(this), 1));\r\n    }\r\n    (newParent) && (newParent.childs.push(this));\r\n    this._parent = newParent;\r\n\r\n    (this.parent) && this.parent.childs.sort((a, b) => {\r\n      return a.node.order - b.node.order;\r\n    });\r\n  }\r\n\r\n  get position(): Vector2 {\r\n    return this._position;\r\n  }\r\n  set position(newPosition: Vector2) {\r\n    this._position = newPosition;\r\n  }\r\n\r\n  get absolutePosition(): Vector2 {\r\n    return Vector2.Zero().transform(this.worldTransform);\r\n  }\r\n\r\n  get rotation(): number {\r\n    return this._rotation;\r\n  }\r\n  set rotation(degrees: number) {\r\n    this._rotation = degrees % 360;\r\n  }\r\n\r\n  get localRotation(): number {\r\n    return this._localRotation;\r\n  }\r\n  set localRotation(newRotation: number) {\r\n    this._localRotation = newRotation % 360;\r\n  }\r\n\r\n  get scale(): Vector2 {\r\n    return this._scale;\r\n  }\r\n  set scale(newScale: Vector2) {\r\n    this._scale = newScale;\r\n  }\r\n\r\n  constructor(public _position: Vector2, public _localRotation: number, public _rotation: number, public _scale: Vector2, controlPoints: Vector2[], public node: Node) {\r\n    this._parent = null;\r\n    this.childs = [];\r\n    this.localTrasform = Matrix.Identity();\r\n    this.worldTransform = Matrix.Identity();\r\n    this.refControlPoints = this.relativeControlPoints(controlPoints);\r\n    this.controlPoints = [...controlPoints];\r\n  }\r\n\r\n  private relativeControlPoints(controlPoints: Vector2[]): Vector2[] {\r\n    let result: Vector2[] = [];\r\n    controlPoints.forEach((controlPoint) => {\r\n      result.push(controlPoint.subtract(this.position));\r\n    });\r\n    return result;\r\n  }\r\n\r\n  // Updates this node's worldTransform using parent's worldTransform if any\r\n  updateWorldTransform(parentWorldTransform?: Matrix) {\r\n\r\n    // Set translation\r\n    this.localTrasform.value = [\r\n      [1, 0, 0],\r\n      [0, 1, 0],\r\n      [this.position.x, this.position.y, 1]\r\n    ];\r\n\r\n    // Transform rotation\r\n    if (this.parent.node.id != '#Root') {\r\n      let cos = Math.cos(this.rotation * Constant.TAU);\r\n      let sin = Math.sin(this.rotation * Constant.TAU);\r\n\r\n      this.localTrasform = (new Matrix([\r\n        [1, 0, 0],\r\n        [0, 1, 0],\r\n        [this.position.x, this.position.y, 1]\r\n      ]).multiply([\r\n        [cos, sin, 0],\r\n        [-sin, cos, 0],\r\n        [0, 0, 1],\r\n      ]).multiply([\r\n        [1, 0, 0],\r\n        [0, 1, 0],\r\n        [-this.position.x, -this.position.y, 1]\r\n      ])).multiply(this.localTrasform);\r\n    }\r\n\r\n    // Transform localRotation\r\n    let cos = Math.cos(this.localRotation * Constant.TAU);\r\n    let sin = Math.sin(this.localRotation * Constant.TAU);\r\n    this.localTrasform = new Matrix([\r\n      [cos, sin, 0],\r\n      [-sin, cos, 0],\r\n      [0, 0, 1]\r\n    ]).multiply(this.localTrasform);\r\n\r\n    // Transform scale\r\n    this.localTrasform = new Matrix([\r\n      [this.scale.x, 0, 0],\r\n      [0, this.scale.y, 0],\r\n      [0, 0, 1]\r\n    ]).multiply(this.localTrasform);\r\n\r\n    if (parentWorldTransform) {\r\n      this.worldTransform = this.localTrasform.multiply(parentWorldTransform);\r\n    } else {\r\n      this.worldTransform = this.localTrasform.clone();\r\n    }\r\n\r\n    this.childs.forEach((child) => {\r\n      child.updateWorldTransform(this.worldTransform);\r\n    });\r\n\r\n    this.applyTransform();\r\n  }\r\n\r\n  // Transforms each control point using this node's worldTransform\r\n  private applyTransform() {\r\n    this.refControlPoints.forEach((controlPoint, index) => {\r\n      this.controlPoints[index] = controlPoint.transform(this.worldTransform);\r\n    });\r\n  }\r\n}\r\n","import { Canvas } from \"../canvas\";\r\nimport { Constant } from \"./math\";\r\nimport { Matrix } from \"./math\";\r\n\r\n/**\r\n * Stores 2D Vector\r\n */\r\nexport class Vector2 {\r\n\r\n  tmpX: number;\r\n  tmpY: number;\r\n\r\n  constructor(public x: number, public y: number) { }\r\n\r\n  toString() {\r\n    return '[' + this.x.toFixed(3) + ', ' + this.y.toFixed(3) + ']';\r\n  }\r\n\r\n  add(arg1: number | Vector2, arg2?: number): Vector2 {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      return new Vector2(this.x + arg1.x, this.y + arg1.y);\r\n    } else if (typeof arg2 === 'undefined') {\r\n      return new Vector2(this.x + arg1, this.y + arg1);\r\n    } else {\r\n      return new Vector2(this.x + arg1, this.y + arg2);\r\n    }\r\n  }\r\n\r\n  addInPlace(arg1: number | Vector2, arg2?: number): Vector2 {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      this.x += arg1.x;\r\n      this.y += arg1.y;\r\n    } else if (!arg2) {\r\n      this.x += arg1;\r\n      this.y += arg1;\r\n    } else {\r\n      this.x += arg1;\r\n      this.y += arg2;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  multiply(arg1: number | Vector2, arg2?: number): Vector2 {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      return new Vector2(this.x * arg1.x, this.y * arg1.y);\r\n    } else {\r\n      return new Vector2(this.x * arg1, this.y * arg2);\r\n    }\r\n  }\r\n\r\n  multiplyInPlace(arg1: number | Vector2, arg2?: number): Vector2 {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      this.x *= arg1.x;\r\n      this.y *= arg1.y;\r\n    } else if (!arg2) {\r\n      this.x *= arg1;\r\n      this.y *= arg1;\r\n    } else {\r\n      this.x *= arg1;\r\n      this.y *= arg2;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  subtract(arg1: number | Vector2, arg2?: number): Vector2 {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      return new Vector2(this.x - arg1.x, this.y - arg1.y);\r\n    } else {\r\n      return new Vector2(this.x - arg1, this.y - arg2);\r\n    }\r\n  }\r\n\r\n  subtractInPlace(arg1: number | Vector2, arg2?: number): void {\r\n    // Params : (vector2d) or (x, y)\r\n    if (arg1 instanceof Vector2) {\r\n      this.x -= arg1.x;\r\n      this.y -= arg1.y;\r\n    } else {\r\n      this.x -= arg1;\r\n      this.y -= arg2;\r\n    }\r\n  }\r\n\r\n  rotate(pivot: Vector2, degrees: number): Vector2 {\r\n    degrees = degrees * Constant.TAU;\r\n    let cosT = Math.cos(degrees);\r\n    let sinT = Math.sin(degrees);\r\n    return new Vector2(\r\n      (cosT * (this.x - pivot.x)) - (sinT * (this.y - pivot.y)) + pivot.x,\r\n      (sinT * (this.x - pivot.x)) + (cosT * (this.y - pivot.y)) + pivot.y\r\n    );\r\n  }\r\n\r\n  rotateInPlace(pivot: Vector2, degrees: number): Vector2 {\r\n    degrees = degrees * Constant.TAU;\r\n    let cosT = Math.cos(degrees);\r\n    let sinT = Math.sin(degrees);\r\n    this.tmpX = (cosT * (this.x - pivot.x)) - (sinT * (this.y - pivot.y)) + pivot.x;\r\n    this.tmpY = (sinT * (this.x - pivot.x)) + (cosT * (this.y - pivot.y)) + pivot.y;\r\n    this.x = this.tmpX;\r\n    this.y = this.tmpY;\r\n    return this;\r\n  }\r\n\r\n  max() {\r\n    return Math.max(this.x, this.y);\r\n  }\r\n\r\n  transform(matrix: Matrix) {\r\n    let result = Matrix.Multiply([[this.x, this.y, 1]], matrix.value);\r\n    return new Vector2(result[0][0], result[0][1]);\r\n  }\r\n\r\n  transformInPlace(matrix: Matrix) {\r\n    let result = Matrix.Multiply([[this.x, this.y, 1]], matrix.value);\r\n    this.x = result[0][0];\r\n    this.y = result[0][1];\r\n  }\r\n\r\n  static Midpoint(vector1: Vector2, vector2: Vector2): Vector2 {\r\n    return new Vector2((vector1.x + vector2.x) / 2, (vector1.y + vector2.y) / 2);\r\n  }\r\n\r\n  static Distance(vector1: Vector2, vector2: Vector2): number {\r\n    return Math.sqrt(Math.pow(vector2.x - vector1.x, 2) + Math.pow(vector2.y - vector1.y, 2));\r\n  }\r\n\r\n  static Zero(): Vector2 {\r\n    return new Vector2(0, 0);\r\n  }\r\n\r\n  static One(): Vector2 {\r\n    return new Vector2(1, 1);\r\n  }\r\n\r\n\r\n  static Bounds(vectors: Vector2[]): Vector2[] {\r\n    let minVec = new Vector2(Number.MAX_VALUE, Number.MAX_VALUE);\r\n    let maxVec = new Vector2(Number.MIN_VALUE, Number.MIN_VALUE);\r\n\r\n    vectors.forEach((vector) => {\r\n      if (vector.x < minVec.x) minVec.x = vector.x;\r\n      if (vector.y < minVec.y) minVec.y = vector.y;\r\n      if (vector.x > maxVec.x) maxVec.x = vector.x;\r\n      if (vector.y > maxVec.y) maxVec.y = vector.y;\r\n    });\r\n    return [minVec, maxVec];\r\n  }\r\n\r\n  static Average(vectors: Vector2[]): Vector2 {\r\n    let sumX = 0;\r\n    let sumY = 0;\r\n    vectors.forEach((vector) => {\r\n      sumX += vector.x;\r\n      sumY += vector.y;\r\n    });\r\n    return new Vector2(sumX / vectors.length, sumY / vectors.length);\r\n  }\r\n\r\n  static Random(minXOrCanvas: number | Canvas, maxX?: number, minY?: number, maxY?: number): Vector2 {\r\n    if (minXOrCanvas instanceof Canvas) {\r\n      return new Vector2(\r\n        Math.random() * minXOrCanvas.width,\r\n        Math.random() * minXOrCanvas.height\r\n      );\r\n    } else {\r\n      return new Vector2(\r\n        Math.random() * (maxX - minXOrCanvas) + minXOrCanvas,\r\n        Math.random() * (maxY - minY) + minY\r\n      );\r\n    }\r\n  }\r\n\r\n  static Lerp(start: Vector2, end: Vector2, amount: number): Vector2 {\r\n    return new Vector2(\r\n      start.x + ((end.x - start.x) * amount),\r\n      start.y + ((end.y - start.y) * amount)\r\n    );\r\n  }\r\n\r\n  clone(): Vector2 {\r\n    return new Vector2(this.x, this.y);\r\n  }\r\n}\r\n","import { Vector2 } from \"../Math/math\";\r\nimport { LinearGradient, RadialGradient } from \"./view\";\r\nimport { Node } from '../node';\r\n\r\ninterface IEllipseProperties {\r\n  outline?: boolean\r\n  fill?: boolean,\r\n  outlineColor?: string | LinearGradient | RadialGradient,\r\n  fillColor?: string | LinearGradient | RadialGradient,\r\n  outlineWidth?: number,\r\n  outlineDashSegments?: number[],\r\n  shadowColor?: string,\r\n  shadowOffset?: Vector2,\r\n  staticShadow?: boolean,\r\n  shadowBlur?: number\r\n}\r\n\r\nexport class Ellipse extends Node {\r\n\r\n  constructor(id: string, position: Vector2, public minor: number, public major: number, public props?: IEllipseProperties) {\r\n\r\n    super(id, position, [\r\n      position.subtract(0, minor),\r\n      position.add(major, 0),\r\n      position.add(0, minor),\r\n      position.subtract(major, 0)\r\n    ]);\r\n\r\n    (!props) && (this.props = {});\r\n    if (this.props.outlineColor && typeof (this.props.outlineColor) != 'string') {\r\n      this.props.outlineColor.node = this;\r\n    }\r\n    if (this.props.fillColor && typeof (this.props.fillColor) != 'string') {\r\n      this.props.fillColor.node = this;\r\n    }\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      (this.props.outlineColor) && (this.context.strokeStyle = (typeof (this.props.outlineColor) == 'string') ? this.props.outlineColor : this.props.outlineColor.create(this.context));\r\n      (this.props.fillColor) && (this.context.fillStyle = (typeof (this.props.fillColor) == 'string') ? this.props.fillColor : this.props.fillColor.create(this.context));\r\n      (this.props.outlineWidth) && (this.context.lineWidth = this.props.outlineWidth);\r\n      (this.props.outlineDashSegments) && this.context.setLineDash(this.props.outlineDashSegments);\r\n      (this.props.shadowColor) && (this.context.shadowColor = this.props.shadowColor);\r\n      (this.props.shadowBlur) && (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    let position = this.absolutePosition;\r\n    this.context.beginPath();\r\n    if (this.minor == this.major) {\r\n      this.context.arc(position.x, position.y, this.minor, 0, 2 * Math.PI);\r\n    } else {\r\n      this.context.ellipse(\r\n        position.x, position.y,\r\n        this.major,\r\n        this.minor,\r\n        Math.atan2(this.transform.controlPoints[1].y - position.y, this.transform.controlPoints[1].x - position.x),\r\n        0,\r\n        2 * Math.PI\r\n      );\r\n    }\r\n    if (this.props.fill) {\r\n      this.context.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.context.stroke();\r\n    }\r\n  }\r\n\r\n  _offRender(): void {\r\n    (this.props.outlineWidth) && (this.offContext.lineWidth = this.props.outlineWidth);\r\n    this.offContext.strokeStyle = this.hitColor;\r\n    this.offContext.fillStyle = this.hitColor;\r\n\r\n    let position = this.absolutePosition;\r\n    this.offContext.beginPath();\r\n    if (this.minor == this.major) {\r\n      this.offContext.arc(position.x, position.y, this.minor, 0, 2 * Math.PI);\r\n    } else {\r\n      this.offContext.ellipse(\r\n        position.x, position.y,\r\n        this.major,\r\n        this.minor,\r\n        Math.atan2(this.transform.controlPoints[1].y - position.y, this.transform.controlPoints[1].x - position.x),\r\n        0,\r\n        2 * Math.PI\r\n      );\r\n    }\r\n    if (this.props.fill) {\r\n      this.offContext.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.offContext.stroke();\r\n    }\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return new Vector2(\r\n      Vector2.Distance(this.transform.controlPoints[1], this.transform.controlPoints[3]),\r\n      Vector2.Distance(this.transform.controlPoints[0], this.transform.controlPoints[2])\r\n    );\r\n  }\r\n}\r\n","import { Vector2 } from \"../Math/math\";\r\nimport { Node } from '../node';\r\n\r\nexport class Empty extends Node {\r\n\r\n  constructor(id: string, position: Vector2) {\r\n    super(id, position, []);\r\n  }\r\n\r\n  _render(): void { }\r\n  _offRender(): void { }\r\n\r\n  getDimension(): Vector2 {\r\n    return Vector2.Zero();\r\n  }\r\n}\r\n","import { Vector2 } from \"../Math/math\";\r\nimport { Node } from '../node';\r\n\r\ninterface IImageProperties {\r\n  shadowColor?: string,\r\n  shadowOffset?: Vector2,\r\n  staticShadow?: boolean,\r\n  shadowBlur?: number\r\n}\r\n\r\nexport class Image extends Node {\r\n\r\n  _source: HTMLImageElement;\r\n\r\n  constructor(id: string, position: Vector2, source: string | HTMLImageElement, public width: number, public height: number, public props?: IImageProperties) {\r\n    super(id, position, []);\r\n\r\n    (!props) && (this.props = {});\r\n    if (typeof (source) == 'string') {\r\n      this._source = new window.Image();\r\n      this._source.src = source;\r\n    } else {\r\n      this._source = source;\r\n    }\r\n    this._source.crossOrigin = \"Anonymous\";\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      (this.props.shadowColor) && (this.context.shadowColor = this.props.shadowColor);\r\n      (this.props.shadowBlur) && (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Rotate image using worldTransform's rotation component\r\n    this.context.translate(this.absolutePosition.x, this.absolutePosition.y);\r\n    this.context.rotate(this.transform.worldTransform.getRotation() * (Math.PI / 180));\r\n    this.context.translate(-this.absolutePosition.x, -this.absolutePosition.y);\r\n\r\n    let topLeft = this.absolutePosition.subtract((this.width * this.transform.scale.x) / 2, (this.height * this.transform.scale.y) / 2);\r\n    this.context.drawImage(this._source, topLeft.x, topLeft.y, this.width * this.transform.scale.x, this.height * this.transform.scale.y);\r\n  }\r\n\r\n  _offRender(): void {\r\n    this.offContext.fillStyle = this.hitColor;\r\n\r\n    // Rotate bounding-rectangle using worldTransform's rotation component\r\n    this.offContext.translate(this.absolutePosition.x, this.absolutePosition.y);\r\n    this.offContext.rotate(this.transform.worldTransform.getRotation() * (Math.PI / 180));\r\n    this.offContext.translate(-this.absolutePosition.x, -this.absolutePosition.y);\r\n\r\n    let topLeft = this.absolutePosition.subtract((this.width * this.transform.scale.x) / 2, (this.height * this.transform.scale.y) / 2);\r\n    this.offContext.fillRect(topLeft.x, topLeft.y, this.width * this.transform.scale.x, this.height * this.transform.scale.y);\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return new Vector2(\r\n      this.width,\r\n      this.height\r\n    );\r\n  }\r\n}\r\n","import { Vector2 } from \"../Math/math\";\r\nimport { LinearGradient, RadialGradient } from \"./view\";\r\nimport { Node } from '../node';\r\n\r\ninterface ILineProperties {\r\n  color?: string | LinearGradient | RadialGradient,\r\n  lineWidth?: number,\r\n  lineCap?: CanvasLineCap,\r\n  lineDashSegments?: number[],\r\n  shadowColor?: string,\r\n  shadowOffset?: Vector2,\r\n  staticShadow?: boolean,\r\n  shadowBlur?: number\r\n}\r\n\r\nexport class Line extends Node {\r\n\r\n  get from(): Vector2 {\r\n    if (this._from instanceof Node)\r\n      return this._from.absolutePosition;\r\n    else\r\n      return this.transform.controlPoints[0];\r\n  }\r\n  get to(): Vector2 {\r\n    if (this._to instanceof Node)\r\n      return this._to.absolutePosition;\r\n    else\r\n      return this.transform.controlPoints[1];\r\n  }\r\n\r\n  constructor(id: string, public _from: Vector2 | Node, public _to: Vector2 | Node, pivot?: number, public props?: ILineProperties) {\r\n    super(\r\n      id,\r\n      (_from instanceof Vector2 && _to instanceof Vector2) ?\r\n        ((pivot) ? _from.add((_to.x - _from.x) * pivot, (_to.y - _from.y) * pivot) : _from.clone()) :\r\n        (Vector2.Zero()),\r\n      (_from instanceof Vector2 && _to instanceof Vector2) ?\r\n        [_from, _to] :\r\n        []\r\n    );\r\n\r\n    (!props) && (this.props = {});\r\n    if (this.props.color && typeof (this.props.color) != 'string') {\r\n      this.props.color.node = this;\r\n    }\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      (this.props.color) && (this.context.strokeStyle = (typeof (this.props.color) == 'string') ? this.props.color : this.props.color.create(this.context));\r\n      (this.props.lineWidth) && (this.context.lineWidth = this.props.lineWidth);\r\n      (this.props.lineCap) && (this.context.lineCap = this.props.lineCap);\r\n      (this.props.lineDashSegments) && this.context.setLineDash(this.props.lineDashSegments);\r\n      (this.props.shadowColor) && (this.context.shadowColor = this.props.shadowColor);\r\n      (this.props.shadowBlur) && (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.context.beginPath();\r\n    this.context.moveTo(this.from.x, this.from.y);\r\n    this.context.lineTo(this.to.x, this.to.y);\r\n    this.context.stroke();\r\n  }\r\n\r\n  _offRender(): void {\r\n    (this.props.lineWidth) && (this.offContext.lineWidth = this.props.lineWidth);\r\n    this.offContext.strokeStyle = this.hitColor;\r\n\r\n    this.offContext.beginPath();\r\n    this.offContext.moveTo(this.from.x, this.from.y);\r\n    this.offContext.lineTo(this.to.x, this.to.y);\r\n    this.offContext.stroke();\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return new Vector2(Vector2.Distance(this.transform.controlPoints[0], this.transform.controlPoints[1]), 0);\r\n  }\r\n}\r\n","import { Vector2 } from \"../Math/math\";\r\nimport { LinearGradient, RadialGradient } from \"./view\";\r\nimport { Node } from '../node';\r\nimport { Handle } from \"../enums\";\r\n\r\ninterface IPolygonProperties {\r\n  outline?: boolean\r\n  fill?: boolean,\r\n  outlineColor?: string | LinearGradient | RadialGradient,\r\n  fillColor?: string | LinearGradient | RadialGradient,\r\n  outlineWidth?: number,\r\n  outlineDashSegments?: number[],\r\n  shadowColor?: string,\r\n  shadowOffset?: Vector2,\r\n  staticShadow?: boolean,\r\n  shadowBlur?: number\r\n}\r\n\r\nexport class Polygon extends Node {\r\n\r\n  constructor(id: string, vertices: Vector2[], center: Vector2 | Handle, public props?: IPolygonProperties) {\r\n\r\n    super(\r\n      id,\r\n      (center instanceof Vector2) ? center : Vector2.Average(vertices),\r\n      vertices\r\n    );\r\n\r\n    (!props) && (this.props = {});\r\n    if (this.props.outlineColor && typeof (this.props.outlineColor) != 'string') {\r\n      this.props.outlineColor.node = this;\r\n    }\r\n    if (this.props.fillColor && typeof (this.props.fillColor) != 'string') {\r\n      this.props.fillColor.node = this;\r\n    }\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      (this.props.outlineColor) && (this.context.strokeStyle = (typeof (this.props.outlineColor) == 'string') ? this.props.outlineColor : this.props.outlineColor.create(this.context));\r\n      (this.props.fillColor) && (this.context.fillStyle = (typeof (this.props.fillColor) == 'string') ? this.props.fillColor : this.props.fillColor.create(this.context));\r\n      (this.props.outlineWidth) && (this.context.lineWidth = this.props.outlineWidth);\r\n      (this.props.outlineDashSegments) && this.context.setLineDash(this.props.outlineDashSegments);\r\n      (this.props.shadowColor) && (this.context.shadowColor = this.props.shadowColor);\r\n      (this.props.shadowBlur) && (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.context.beginPath();\r\n    this.context.moveTo(this.transform.controlPoints[0].x, this.transform.controlPoints[0].y);\r\n    for (let index = 1; index < this.transform.controlPoints.length; index++) {\r\n      this.context.lineTo(this.transform.controlPoints[index].x, this.transform.controlPoints[index].y);\r\n    }\r\n    this.context.closePath();\r\n\r\n    if (this.props.fill) {\r\n      this.context.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.context.stroke();\r\n    }\r\n  }\r\n\r\n  _offRender(): void {\r\n    (this.props.outlineWidth) && (this.offContext.lineWidth = this.props.outlineWidth);\r\n    this.offContext.strokeStyle = this.hitColor;\r\n    this.offContext.fillStyle = this.hitColor;\r\n\r\n    this.offContext.beginPath();\r\n    this.offContext.moveTo(this.transform.controlPoints[0].x, this.transform.controlPoints[0].y);\r\n    for (let index = 1; index < this.transform.controlPoints.length; index++) {\r\n      this.offContext.lineTo(this.transform.controlPoints[index].x, this.transform.controlPoints[index].y);\r\n    }\r\n    this.offContext.closePath();\r\n\r\n    if (this.props.fill) {\r\n      this.offContext.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.offContext.stroke();\r\n    }\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    let bounds = Vector2.Bounds(this.transform.controlPoints);\r\n\r\n    return new Vector2(\r\n      Math.abs(bounds[0].x - bounds[1].x),\r\n      Math.abs(bounds[0].y - bounds[1].y)\r\n    );\r\n  }\r\n}\r\n","import { Vector2 } from \"../Math/math\";\r\nimport { LinearGradient, RadialGradient } from \"./view\";\r\nimport { Node } from '../node';\r\n\r\ninterface IRectangleProperties {\r\n  outline?: boolean,\r\n  fill?: boolean,\r\n  outlineColor?: string | LinearGradient | RadialGradient,\r\n  fillColor?: string | LinearGradient | RadialGradient,\r\n  outlineWidth?: number,\r\n  outlineDashSegments?: number[],\r\n  shadowColor?: string,\r\n  shadowOffset?: Vector2,\r\n  staticShadow?: boolean,\r\n  shadowBlur?: number\r\n}\r\n\r\nexport class Rectangle extends Node {\r\n\r\n  constructor(id: string, position: Vector2, width: number, height: number, public props?: IRectangleProperties) {\r\n\r\n    super(id, position, [\r\n      position.add(-width / 2, -height / 2),\r\n      position.add(width / 2, -height / 2),\r\n      position.add(width / 2, height / 2),\r\n      position.add(-width / 2, height / 2)\r\n    ]);\r\n\r\n    (!props) && (this.props = {});\r\n    if (this.props.outlineColor && typeof (this.props.outlineColor) != 'string') {\r\n      this.props.outlineColor.node = this;\r\n    }\r\n    if (this.props.fillColor && typeof (this.props.fillColor) != 'string') {\r\n      this.props.fillColor.node = this;\r\n    }\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      (this.props.outlineColor) && (this.context.strokeStyle = (typeof (this.props.outlineColor) == 'string') ? this.props.outlineColor : this.props.outlineColor.create(this.context));\r\n      (this.props.fillColor) && (this.context.fillStyle = (typeof (this.props.fillColor) == 'string') ? this.props.fillColor : this.props.fillColor.create(this.context));\r\n      (this.props.outlineWidth) && (this.context.lineWidth = this.props.outlineWidth);\r\n      (this.props.outlineDashSegments) && this.context.setLineDash(this.props.outlineDashSegments);\r\n      (this.props.shadowColor) && (this.context.shadowColor = this.props.shadowColor);\r\n      (this.props.shadowBlur) && (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.context.beginPath();\r\n    this.context.moveTo(this.transform.controlPoints[0].x, this.transform.controlPoints[0].y);\r\n    this.context.lineTo(this.transform.controlPoints[1].x, this.transform.controlPoints[1].y);\r\n    this.context.lineTo(this.transform.controlPoints[2].x, this.transform.controlPoints[2].y);\r\n    this.context.lineTo(this.transform.controlPoints[3].x, this.transform.controlPoints[3].y);\r\n    this.context.lineTo(this.transform.controlPoints[0].x, this.transform.controlPoints[0].y);\r\n    if (this.props.fill) {\r\n      this.context.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.context.stroke();\r\n    }\r\n  }\r\n\r\n  _offRender(): void {\r\n    (this.props.outlineWidth) && (this.offContext.lineWidth = this.props.outlineWidth);\r\n    this.offContext.strokeStyle = this.hitColor;\r\n    this.offContext.fillStyle = this.hitColor;\r\n\r\n    this.offContext.beginPath();\r\n    this.offContext.moveTo(this.transform.controlPoints[0].x, this.transform.controlPoints[0].y);\r\n    this.offContext.lineTo(this.transform.controlPoints[1].x, this.transform.controlPoints[1].y);\r\n    this.offContext.lineTo(this.transform.controlPoints[2].x, this.transform.controlPoints[2].y);\r\n    this.offContext.lineTo(this.transform.controlPoints[3].x, this.transform.controlPoints[3].y);\r\n    this.offContext.lineTo(this.transform.controlPoints[0].x, this.transform.controlPoints[0].y);\r\n    if (this.props.fill) {\r\n      this.offContext.fill();\r\n    }\r\n    if (this.props.outline || !this.props.fill) {\r\n      this.offContext.stroke();\r\n    }\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return new Vector2(\r\n      Vector2.Distance(this.transform.controlPoints[0], this.transform.controlPoints[1]),\r\n      Vector2.Distance(this.transform.controlPoints[1], this.transform.controlPoints[2])\r\n    );\r\n  }\r\n}\r\n","import { Vector2 } from \"../Math/math\";\r\nimport { LinearGradient, RadialGradient } from \"./view\";\r\nimport { Node } from '../node';\r\n\r\ninterface ITextProperties {\r\n  font?: string,\r\n  outline?: boolean,\r\n  fill?: boolean,\r\n  outlineColor?: string | LinearGradient | RadialGradient,\r\n  fillColor?: string | LinearGradient | RadialGradient,\r\n  outlineWidth?: number,\r\n  shadowColor?: string,\r\n  shadowOffset?: Vector2,\r\n  staticShadow?: boolean,\r\n  shadowBlur?: number\r\n}\r\n\r\nexport class Text extends Node {\r\n\r\n  _text: string;\r\n  _originalWidth: number;\r\n  _originalHeight: number;\r\n\r\n  get text(): string {\r\n    return this._text;\r\n  }\r\n  set text(text: string) {\r\n    this._text = text;\r\n  }\r\n\r\n  constructor(id: string, position: Vector2, text: string, public props?: ITextProperties) {\r\n    super(id, position, []);\r\n\r\n    (!props) && (this.props = {});\r\n    this.text = text;\r\n    if (this.props.outlineColor && typeof (this.props.outlineColor) != 'string') {\r\n      this.props.outlineColor.node = this;\r\n    }\r\n    if (this.props.fillColor && typeof (this.props.fillColor) != 'string') {\r\n      this.props.fillColor.node = this;\r\n    }\r\n\r\n    let textMetricContext = document.createElement('canvas').getContext('2d');\r\n    (this.props.font) && (textMetricContext.font = this.props.font);\r\n    this._originalWidth = textMetricContext.measureText(text).width;\r\n    this._originalHeight = textMetricContext.measureText('M').width;\r\n  }\r\n\r\n  _render(): void {\r\n    if (this.props) {\r\n      (this.props.outlineColor) && (this.context.strokeStyle = (typeof (this.props.outlineColor) == 'string') ? this.props.outlineColor : this.props.outlineColor.create(this.context));\r\n      (this.props.fillColor) && (this.context.fillStyle = (typeof (this.props.fillColor) == 'string') ? this.props.fillColor : this.props.fillColor.create(this.context));\r\n      (this.props.outlineWidth) && (this.context.lineWidth = this.props.outlineWidth);\r\n      (this.props.shadowColor) && (this.context.shadowColor = this.props.shadowColor);\r\n      (this.props.shadowBlur) && (this.context.shadowBlur = this.props.shadowBlur);\r\n      if (this.props.shadowOffset) {\r\n        if (!this.props.staticShadow) {\r\n          let shadowOffset = this.props.shadowOffset.transform(this.transform.worldTransform).subtract(this.absolutePosition);\r\n          this.context.shadowOffsetX = shadowOffset.x;\r\n          this.context.shadowOffsetY = shadowOffset.y;\r\n        } else {\r\n          this.context.shadowOffsetX = this.props.shadowOffset.x;\r\n          this.context.shadowOffsetY = this.props.shadowOffset.y;\r\n        }\r\n      }\r\n      (this.props.font) && (this.context.font = this.props.font);\r\n    }\r\n\r\n    // Rotate image using worldTransform's rotation component\r\n    this.context.translate(this.absolutePosition.x, this.absolutePosition.y);\r\n    this.context.scale(this.scale.x, this.scale.y);\r\n    this.context.rotate(this.transform.worldTransform.getRotation() * (Math.PI / 180));\r\n    this.context.translate(-this.absolutePosition.x, -this.absolutePosition.y);\r\n\r\n    (this.props.outline) && this.context.strokeText(this.text, this.absolutePosition.x - (this._originalWidth / 2), this.absolutePosition.y + (this._originalHeight / 2));\r\n    (this.props.fill || !this.props.outline) && this.context.fillText(this.text, this.absolutePosition.x - (this._originalWidth / 2), this.absolutePosition.y + (this._originalHeight / 2));\r\n  }\r\n\r\n  _offRender(): void {\r\n    this.offContext.fillStyle = this.hitColor;\r\n\r\n    // Rotate image using worldTransform's rotation component\r\n    this.offContext.translate(this.absolutePosition.x, this.absolutePosition.y);\r\n    this.offContext.scale(this.scale.x, this.scale.y);\r\n    this.offContext.rotate(this.transform.worldTransform.getRotation() * (Math.PI / 180));\r\n    this.offContext.translate(-this.absolutePosition.x, -this.absolutePosition.y);\r\n\r\n    this.offContext.fillRect(this.absolutePosition.x - (this._originalWidth / 2), this.absolutePosition.y - (this._originalHeight / 2), (this._originalWidth), (this._originalHeight));\r\n  }\r\n\r\n  getDimension(): Vector2 {\r\n    return new Vector2(Vector2.Distance(this.transform.controlPoints[0], this.transform.controlPoints[1]), 0);\r\n  }\r\n}\r\n","import { Constant } from \"../Math/math\";\r\nimport { Vector2 } from \"../Math/math\";\r\nimport { Handle } from \"../enums\";\r\nimport { Node } from '../node';\r\n\r\nexport * from './ellipse';\r\nexport * from './empty';\r\nexport * from './image';\r\nexport * from './line';\r\nexport * from './polygon';\r\nexport * from './rectangle';\r\nexport * from './text';\r\n\r\nexport class LinearGradient {\r\n\r\n  node: Node;\r\n\r\n  constructor(public offset: Vector2, public degrees: number, public length: number | Handle, public colors: string[], public weights: number[]) { }\r\n\r\n  create(context: CanvasRenderingContext2D): CanvasGradient {\r\n    let gradient: CanvasGradient, from, to, length, delta = new Vector2(0, 0);\r\n\r\n    length = (this.length == Handle.AUTO) ? this.node.getDimension().max() : this.length;\r\n    delta.x = (length / 2) * Math.cos(this.degrees * Constant.TAU);\r\n    delta.y = (length / 2) * Math.sin(this.degrees * Constant.TAU);\r\n\r\n    from = this.offset.subtract(delta).transform(this.node.transform.worldTransform);\r\n    to = this.offset.add(delta).transform(this.node.transform.worldTransform);\r\n\r\n    //Debug.debugLine(this.node.drawing, from, to, {color: 'yellow', width: 2});\r\n\r\n    gradient = context.createLinearGradient(from.x, from.y, to.x, to.y);\r\n    this.colors.forEach((color, index) => {\r\n      gradient.addColorStop(this.weights[index], color);\r\n    });\r\n    return gradient;\r\n  }\r\n}\r\n\r\nexport class RadialGradient {\r\n\r\n  node: Node;\r\n\r\n  constructor(public fromOffset: Vector2, public fromRadius: number | Handle, public toOffset: Vector2, public toRadius: number | Handle, public colors: string[], public weights: number[]) { }\r\n\r\n  create(context: CanvasRenderingContext2D): CanvasGradient {\r\n    let gradient: CanvasGradient;\r\n    let fromCenter = this.fromOffset.transform(this.node.transform.worldTransform);\r\n    let toCenter = this.toOffset.transform(this.node.transform.worldTransform);\r\n    let fromRadius, toRadius;\r\n    if (this.fromRadius == Handle.AUTO || this.toRadius == Handle.AUTO) {\r\n      fromRadius = 1;\r\n      toRadius = this.node.getDimension().max() / 2;\r\n    } else {\r\n      fromRadius = this.fromRadius;\r\n      toRadius = this.toRadius;\r\n    }\r\n\r\n    //Debug.debugPoint(this.node.drawing, fromCenter, {color: 'green', radius: 2});\r\n    //Debug.debugPoint(this.node.drawing, toCenter, {color: 'red', radius: 2});\r\n\r\n    gradient = context.createRadialGradient(fromCenter.x, fromCenter.y, fromRadius, toCenter.x, toCenter.y, toRadius);\r\n    this.colors.forEach((color, index) => {\r\n      gradient.addColorStop(this.weights[index], color);\r\n    });\r\n    return gradient;\r\n  }\r\n}\r\n","import { Drawing } from \"./drawing\";\r\n\r\n/**\r\n * The Canvas object holds an HTMLCanvasElement reference and its 2d context\r\n */\r\nexport class Canvas {\r\n  canvasElement: HTMLCanvasElement;\r\n  context: CanvasRenderingContext2D;\r\n  offCanvasElement: OffscreenCanvas;\r\n  offContext: OffscreenCanvasRenderingContext2D;\r\n\r\n  width: number;\r\n  height: number;\r\n  private drawingHandle: number = -1;\r\n\r\n  /**\r\n   * If no parameters are passed then a new canvas element will be created and appended to `<body>`\r\n   * \r\n   * @param element Reference to an html `<canvas>` or `<div>` element, if a `<div>` element is passed, then a canvas will be created and appended\r\n   * @param width Passing a width will overwrite previously defined canvas width\r\n   * @param height Passing a height will overwrite previously defined canvas height\r\n   */\r\n  constructor(element?: HTMLCanvasElement | HTMLDivElement, width?: number, height?: number) {\r\n    if (!element) {\r\n      this.canvasElement = document.createElement('canvas');\r\n      this.canvasElement.width = document.body.clientWidth;\r\n      this.canvasElement.height = document.body.clientHeight;\r\n      document.body.appendChild(this.canvasElement);\r\n    } else {\r\n      if (element instanceof HTMLDivElement) {\r\n        this.canvasElement = document.createElement('canvas');\r\n        if (width && height) {\r\n          this.canvasElement.width = width;\r\n          this.canvasElement.height = height;\r\n        } else {\r\n          this.canvasElement.width = element.clientWidth;\r\n          this.canvasElement.height = element.clientHeight;\r\n        }\r\n        element.appendChild(this.canvasElement);\r\n      } else {\r\n        this.canvasElement = element;\r\n        if (width && height) {\r\n          this.canvasElement.width = width;\r\n          this.canvasElement.height = height;\r\n        }\r\n      }\r\n    }\r\n    this.width = this.canvasElement.width;\r\n    this.height = this.canvasElement.height;\r\n    this.context = this.canvasElement.getContext('2d');\r\n\r\n    this.offCanvasElement = new OffscreenCanvas(this.width, this.height);\r\n    this.offContext = this.offCanvasElement.getContext('2d');\r\n  }\r\n\r\n  /**\r\n   * Calls render function of `Drawing`\r\n   * \r\n   * @param drawing A `Drawing` object, which will be rendered by this canvas\r\n   */\r\n  draw(drawing: Drawing) {\r\n    if (this.drawingHandle != -1) {\r\n      window.cancelAnimationFrame(this.drawingHandle);\r\n    }\r\n    window.requestAnimationFrame(drawing.render.bind(drawing));\r\n  }\r\n}\r\n","export class Color {\r\n  static Random(): string {\r\n    return ('#' + Math.floor(Math.random() * 16777215).toString(16));\r\n  }\r\n\r\n  static rgbToHex(rgb: number[] | Uint8ClampedArray): string {\r\n    return \"#\" + Color._componentToHex(rgb[0]) + Color._componentToHex(rgb[1]) + Color._componentToHex(rgb[2]);\r\n  }\r\n\r\n  static _componentToHex(c: number) {\r\n    let hex = c.toString(16);\r\n    return hex.length == 1 ? '0' + hex : hex;\r\n  }\r\n}\r\n","import { Drawing, IDebugCall } from \"./drawing\";\r\nimport { Vector2 } from \"./Math/math\";\r\n\r\n/**\r\n * Includes static methods for debugging\r\n */\r\nexport class Debug {\r\n\r\n  /**\r\n   * Will render a filled circle denoting a single point on canvas\r\n   * \r\n   * @param key A unique name for this debug\r\n   * @param drawing Drawing, on which this debug will render\r\n   * @param point The point to render\r\n   * @param props Styling properties for debug\r\n   * @param frames Specifies for how many frames this debug will persist (e.g passing 100 will allow this debug to be rendered for 100 consecutive frames without clearing it from canvas)\r\n   */\r\n  static debugPoint(key: string, drawing: Drawing, point: Vector2, props: { color: string, radius?: number }, frames?: number) {\r\n    Debug.limitDebugCalls(drawing, key, frames);\r\n\r\n    drawing.debugCalls[key].push({\r\n      debugFunction: Debug._debugPoint,\r\n      arguments: [drawing.canvas.context, point.clone(), props]\r\n    });\r\n  }\r\n\r\n  private static _debugPoint(context: CanvasRenderingContext2D, center: Vector2, props: { color: string, radius?: number }) {\r\n    context.fillStyle = props.color;\r\n    context.beginPath();\r\n    context.arc(center.x, center.y, (props.radius) ? props.radius : 2, 0, 2 * Math.PI);\r\n    context.fill();\r\n  }\r\n\r\n  /**\r\n   * Will render a line with green and red dots on start and end co-ordinates of line\r\n   * \r\n   * @param key A unique name for this debug\r\n   * @param drawing Drawing, on which this debug will render\r\n   * @param from Start Vector for this line\r\n   * @param to End Vector point for this line\r\n   * @param props Styling properties for debug\r\n   * @param frames Specifies for how many frames this debug will persist (e.g passing 100 will allow this debug to be rendered for 100 consecutive frames without clearing it from canvas)\r\n   */\r\n  static debugLine(key: string, drawing: Drawing, from: Vector2, to: Vector2, props: { color: string, width?: number }, frames?: number) {\r\n    Debug.limitDebugCalls(drawing, key, frames);\r\n\r\n    drawing.debugCalls[key].push({\r\n      debugFunction: Debug._debugLine,\r\n      arguments: [drawing.canvas.context, from.clone(), to.clone(), props]\r\n    });\r\n  }\r\n\r\n  private static _debugLine(context: CanvasRenderingContext2D, from: Vector2, to: Vector2, props: { color: string, width?: number }) {\r\n    context.strokeStyle = props.color;\r\n    context.lineWidth = (props.width) ? props.width : 1;\r\n    context.beginPath();\r\n    context.moveTo(from.x, from.y);\r\n    context.lineTo(to.x, to.y);\r\n    context.stroke();\r\n\r\n    context.fillStyle = 'green'\r\n    context.beginPath();\r\n    context.arc(from.x, from.y, 2, 0, 2 * Math.PI);\r\n    context.fill();\r\n\r\n    context.fillStyle = 'red';\r\n    context.beginPath();\r\n    context.arc(to.x, to.y, 2, 0, 2 * Math.PI);\r\n    context.fill();\r\n  }\r\n\r\n  /**\r\n   * @hidden\r\n   * \r\n   * Starts debug render calls stored in debugCalls\r\n   */\r\n  static show(debugCalls: IDebugCall, context: CanvasRenderingContext2D) {\r\n    for (let debug in debugCalls) {\r\n      for (let call of debugCalls[debug]) {\r\n        context.save();\r\n        call.debugFunction(...call.arguments);\r\n        context.restore();\r\n      }\r\n    }\r\n  }\r\n\r\n  // Used for persisting the debug calls on canvas (shifts array of debug calls to limit array size to frames)\r\n  private static limitDebugCalls(drawing: Drawing, key: string, frames: number) {\r\n    if (frames && drawing.debugCalls[key] && (frames - 1) < drawing.debugCalls[key].length) {\r\n      drawing.debugCalls[key].shift();\r\n    } else {\r\n      (!drawing.debugCalls[key] || !frames) && (drawing.debugCalls[key] = []);\r\n    }\r\n  }\r\n}\r\n","import { Canvas } from \"./canvas\";\r\nimport { Debug } from \"./debug\";\r\nimport { Vector2 } from \"./Math/math\";\r\nimport { Empty } from \"./View/view\";\r\nimport { Node } from './node';\r\nimport { Color } from \"./color\";\r\n\r\nexport interface IDebugCall {\r\n  [key: string]: {\r\n    debugFunction: Function,\r\n    arguments: any[],\r\n    frames?: number\r\n  }[]\r\n}\r\n\r\n/**\r\n * Stores all views which will be rendered by canvas\r\n */\r\nexport class Drawing {\r\n\r\n  // Scene-graph root node\r\n  private renderTree: Node;\r\n  /**@hidden */\r\n  debugCalls: IDebugCall;\r\n\r\n  colorToNode: { [key: string]: Node };\r\n  mousePos: Vector2;\r\n\r\n  /**\r\n   * \r\n   * @param canvas The Canvas object\r\n   * @param globalUpdate A function that will be called per frame\r\n   */\r\n  constructor(public canvas: Canvas, public globalUpdate?: Function) {\r\n    let rootNode = new Empty('#Root', Vector2.Zero());\r\n    rootNode.context = this.canvas.context;\r\n    rootNode.drawing = this;\r\n    this.renderTree = rootNode;\r\n    this.debugCalls = {}\r\n\r\n    this.mousePos = Vector2.Zero();\r\n    this.colorToNode = {};\r\n    this._registerEvents();\r\n  }\r\n\r\n  _registerEvents(): void {\r\n    let currentHitNode: Node, prevHitNode: Node;\r\n    let isDragging = false;\r\n    let currentDragNode: Node = null;\r\n    let canvasOffset: DOMRect;\r\n\r\n    this.canvas.canvasElement.onmousemove = (ev) => {\r\n      canvasOffset = this.canvas.canvasElement.getBoundingClientRect();\r\n      this.mousePos.x = ev.clientX - canvasOffset.left;\r\n      this.mousePos.y = ev.clientY - canvasOffset.top;\r\n\r\n      currentHitNode = this._getHitNode(this.mousePos);\r\n      if (currentHitNode != prevHitNode) {\r\n        (prevHitNode) && prevHitNode.call('mouseexit');\r\n        (currentHitNode) && currentHitNode.call('mouseenter');\r\n      }\r\n      prevHitNode = currentHitNode;\r\n\r\n      (currentDragNode) && currentDragNode.call('drag', [this.mousePos.clone()]);\r\n    };\r\n\r\n    this.canvas.canvasElement.onmousedown = () => {\r\n      isDragging = true;\r\n      currentDragNode = currentHitNode;\r\n\r\n      let hitNode = this._getHitNode(this.mousePos);\r\n      (hitNode) && hitNode.call('mousedown');\r\n    }\r\n\r\n    this.canvas.canvasElement.onmouseup = () => {\r\n      isDragging = false;\r\n      currentDragNode = null;\r\n\r\n      let hitNode = this._getHitNode(this.mousePos);\r\n      (hitNode) && hitNode.call('mouseup');\r\n    }\r\n\r\n    this.canvas.canvasElement.onclick = () => {\r\n      let hitNode = this._getHitNode(this.mousePos);\r\n      (hitNode) && hitNode.call('click');\r\n    };\r\n\r\n    this.canvas.canvasElement.oncontextmenu = (ev) => {\r\n      ev.preventDefault();\r\n\r\n      let hitNode = this._getHitNode(this.mousePos);\r\n      (hitNode) && hitNode.call('rightclick');\r\n    }\r\n  }\r\n\r\n  _getHitNode(position: Vector2): Node {\r\n    return (\r\n      this.colorToNode[\r\n      Color.rgbToHex(\r\n        this.canvas.offContext.getImageData(position.x, position.y, 1, 1).data\r\n      )\r\n      ]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @hidden\r\n   */\r\n  render() {\r\n    this.canvas.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    this.canvas.offContext.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n    this.renderTree.call('update');\r\n\r\n    (this.globalUpdate) && this.globalUpdate();\r\n\r\n    this.renderTree.transform.childs.forEach((child) => {\r\n      child.updateWorldTransform();\r\n    });\r\n\r\n    this.renderTree.transform.childs.forEach((child) => {\r\n      child.node.render();\r\n    });\r\n\r\n    Debug.show(this.debugCalls, this.canvas.context);\r\n    window.requestAnimationFrame(this.render.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Adds a view object to this drawing\r\n   * \r\n   * @param node A View object to be rendered\r\n   */\r\n  add(node: Node | Node[]): void {\r\n    if (node instanceof Node) {\r\n      node.parent = this.renderTree;\r\n      node.setContext(this.canvas.context, this.canvas.offContext);\r\n      node.setDrawing(this);\r\n      node.setHitColor();\r\n    } else {\r\n      node.forEach((cNode) => {\r\n        cNode.parent = this.renderTree;\r\n        cNode.setContext(this.canvas.context, this.canvas.offContext);\r\n        cNode.setDrawing(this);\r\n        cNode.setHitColor();\r\n      });\r\n    }\r\n  }\r\n\r\n  remove(nodeOrID: Node | string) {\r\n    if (nodeOrID instanceof Node) nodeOrID = nodeOrID.id;\r\n\r\n    let queue = [];\r\n    let currentNode;\r\n    queue.push(this.renderTree);\r\n\r\n    while ((currentNode = queue.shift())) {\r\n      if (currentNode.id == nodeOrID) {\r\n        currentNode.transform.parent.childs.splice(currentNode.transform.parent.childs.indexOf(currentNode.transform), 1);\r\n      } else {\r\n        currentNode.transform.childs.forEach((child) => {\r\n          queue.push(child.node);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  _debugSceneGraph(root: Node, indent: string): void {\r\n    console.log(indent + root.id + '[' + root.order + ']');\r\n\r\n    root.transform.childs.forEach((child) => {\r\n      this._debugSceneGraph(child.node, ' ' + indent);\r\n    });\r\n  }\r\n}\r\n","export enum Handle {\r\n  AUTO = -1\r\n}\r\n","import { Transform } from './Math/math';\r\nimport { Drawing } from './drawing';\r\nimport { Event } from './event';\r\nimport { Vector2 } from './Math/math';\r\nimport { Color } from './color';\r\n\r\n/**@hidden */\r\nexport abstract class Node implements Event {\r\n\r\n  drawing: Drawing;\r\n  context: CanvasRenderingContext2D;\r\n  offContext: OffscreenCanvasRenderingContext2D;\r\n  transform: Transform;\r\n  registeredEvents: any;\r\n  order: number;\r\n  hitColor: string;\r\n\r\n  abstract _render(): void;\r\n  abstract _offRender(): void;\r\n  abstract getDimension(): Vector2;\r\n\r\n  get zIndex(): number {\r\n    return this.order;\r\n  }\r\n\r\n  set zIndex(zIndex: number) {\r\n    this.order = zIndex;\r\n\r\n    (this.parent) && this.parent.transform.childs.sort((a, b) => {\r\n      return a.node.order - b.node.order;\r\n    });\r\n  }\r\n\r\n  get parent(): Node {\r\n    return this.transform.parent.node;\r\n  }\r\n  set parent(newParent: Node) {\r\n    this.transform.parent = newParent.transform;\r\n  }\r\n\r\n  get childs(): Node[] {\r\n    return this.transform.childs.map((child) => {\r\n      return child.node;\r\n    });\r\n  }\r\n\r\n  get position(): Vector2 {\r\n    return this.transform.position;\r\n  }\r\n  set position(position: Vector2) {\r\n    this.transform.position = position;\r\n  }\r\n  get absolutePosition(): Vector2 {\r\n    return this.transform.absolutePosition;\r\n  }\r\n\r\n  get rotation(): number {\r\n    return this.transform.rotation;\r\n  }\r\n  set rotation(degrees: number) {\r\n    this.transform.rotation = degrees;\r\n  }\r\n\r\n  get localRotation(): number {\r\n    return this.transform.localRotation;\r\n  }\r\n  set localRotation(degrees: number) {\r\n    this.transform.localRotation = degrees;\r\n  }\r\n\r\n  get scale(): Vector2 {\r\n    return this.transform.scale;\r\n  }\r\n  set scale(scale: Vector2) {\r\n    this.transform.scale = scale;\r\n  }\r\n\r\n  constructor(public id: string, position: Vector2, controlPoints: Vector2[]) {\r\n    this.transform = new Transform(position, 0, 0, Vector2.One(), controlPoints, this);\r\n    this.registeredEvents = {};\r\n    this.order = 0;\r\n  }\r\n\r\n  setHitColor() {\r\n    // Set unique color for hit detection in offscreen canvas\r\n    let color: string = Color.Random();\r\n    while (this.drawing.colorToNode[color]) {\r\n      color = Color.Random();\r\n    }\r\n\r\n    this.hitColor = color;\r\n    this.drawing.colorToNode[color] = this;\r\n\r\n    this.transform.childs.forEach((child) => {\r\n      child.node.setHitColor();\r\n    })\r\n  }\r\n\r\n  on(eventKey: string, callback: Function): void {\r\n    this.registeredEvents[eventKey] = callback;\r\n  }\r\n\r\n  render(): void {\r\n    this.context.save();\r\n    this._render();\r\n    this.context.restore();\r\n    this.offRender();\r\n\r\n    for (var child of this.transform.childs) {\r\n      child.node.render();\r\n    }\r\n  }\r\n\r\n  offRender(): void {\r\n    this.offContext.save();\r\n    this._offRender();\r\n    this.offContext.restore();\r\n  }\r\n\r\n  call(method: string, args?: any[]) {\r\n    if (this.registeredEvents[method]) {\r\n      if (args) {\r\n        this.registeredEvents[method](this, ...args);\r\n      } else {\r\n        this.registeredEvents[method](this);\r\n      }\r\n    }\r\n\r\n    for (var child of this.transform.childs) {\r\n      child.node.call(method, args);\r\n    }\r\n  }\r\n\r\n  setContext(context: CanvasRenderingContext2D, offContext: OffscreenCanvasRenderingContext2D) {\r\n    this.context = context;\r\n    this.offContext = offContext;\r\n    this.transform.childs.forEach((child) => {\r\n      child.node.setContext(context, offContext);\r\n    });\r\n  }\r\n\r\n  setDrawing(drawing: Drawing) {\r\n    this.drawing = drawing;\r\n    this.transform.childs.forEach((child) => {\r\n      child.node.setDrawing(drawing);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  dispose(): void {\r\n    this.drawing.remove(this.id);\r\n  }\r\n}\r\n","export * from './enums';\r\nexport * from './drawing';\r\nexport * from './debug';\r\nexport * from './color';\r\nexport * from './canvas';\r\nexport * as View from './View/view';\r\nexport * from './Math/math';","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(229);\n"],"sourceRoot":""}